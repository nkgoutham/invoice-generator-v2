import{u as C,r,j as e,L as d,U as f,R as S}from"./index-DMTdQ3St.js";import{u as A}from"./clientStore-Bedc05g4.js";import{t as R}from"./helpers-kgrKKtTT.js";import{P as p}from"./plus-circle-DtCdQUqZ.js";import{S as L}from"./search-DQGV9Rah.js";import{F as _}from"./filter-CpVmvab7.js";import{B as P}from"./building-BwG9NAGn.js";import{M as k}from"./mail-CvfNZUA1.js";import{P as E}from"./phone-dzjgbDSA.js";import{A as F}from"./arrow-right-Q1W384Tb.js";const D=()=>{const{user:l}=C(),{clients:t,loading:j,error:x,fetchClients:o}=A(),[i,g]=r.useState(""),[c,N]=r.useState("all"),[m,v]=r.useState([]),[u,h]=r.useState(!1);r.useEffect(()=>{l&&o(l.id)},[l,o]),r.useEffect(()=>{if(t){let s=[...t];if(i){const a=i.toLowerCase();s=s.filter(n=>n.name.toLowerCase().includes(a)||n.company_name&&n.company_name.toLowerCase().includes(a)||n.email&&n.email.toLowerCase().includes(a))}c!=="all"&&(s=s.filter(a=>a.status===c)),v(s)}},[t,i,c]);const b={active:"badge-success",inactive:"badge-neutral",prospect:"badge-info"},w=s=>({onboarding:"New",active:"Active",inactive:"Inactive",project:"Project-based",retainer:"Retainer",completed:"Completed"})[s]||"Active",y=async()=>{l&&(h(!0),await o(l.id),setTimeout(()=>h(!1),800))};return j&&!t.length?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"loader h-12 w-12"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-accent-600 to-accent-500",children:"Clients"})}),e.jsxs(d,{to:"/clients/new",className:"w-full sm:w-auto btn btn-primary btn-md",children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Add Client"]})]}),x&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl animate-fade-in",children:x}),e.jsx("div",{className:"card mb-6",children:e.jsx("div",{className:"p-4 border-b border-neutral-200/70",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-3 md:gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(L,{className:"h-4 w-4 text-neutral-400 group-focus-within:text-accent-500 transition-colors duration-150"})}),e.jsx("input",{type:"text",className:"form-input pl-10 w-full",placeholder:"Search clients...",value:i,onChange:s=>g(s.target.value)})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(_,{className:"h-4 w-4 text-neutral-400 group-focus-within:text-accent-500 transition-colors duration-150"})}),e.jsxs("select",{className:"form-select pl-10 w-full",value:c,onChange:s=>N(s.target.value),children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"prospect",children:"Prospect"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"h-5 w-5 text-neutral-400 mr-2"}),e.jsxs("span",{className:"text-sm text-neutral-600",children:[m.length," client",m.length!==1?"s":""]})]}),e.jsxs("button",{onClick:y,className:"btn btn-secondary btn-sm",disabled:u,children:[e.jsx(S,{className:`h-4 w-4 ${u?"animate-spin":""}`}),e.jsx("span",{className:"ml-1.5",children:"Refresh"})]})]})]})})}),m.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:m.map(s=>e.jsxs(d,{to:`/clients/${s.id}`,className:"card hover:shadow-hover hover:-translate-y-1 transition-all duration-300 flex flex-col group",children:[e.jsxs("div",{className:"p-4 sm:p-5 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium text-neutral-900 truncate max-w-[70%] group-hover:text-accent-600 transition-colors",children:s.name}),e.jsx("span",{className:`badge ${b[s.status]||"badge-neutral"}`,children:s.status})]}),s.company_name&&e.jsxs("div",{className:"mt-3 flex items-center text-sm text-neutral-600",children:[e.jsx(P,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-neutral-400"}),e.jsx("span",{className:"truncate",children:s.company_name})]}),s.email&&e.jsxs("div",{className:"mt-2 flex items-center text-sm text-neutral-600",children:[e.jsx(k,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-neutral-400"}),e.jsx("span",{className:"truncate",children:s.email})]}),s.phone&&e.jsxs("div",{className:"mt-2 flex items-center text-sm text-neutral-600",children:[e.jsx(E,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-neutral-400"}),e.jsx("span",{children:s.phone})]}),s.billing_address&&e.jsx("div",{className:"mt-3 text-sm text-neutral-600",children:e.jsx("p",{className:"truncate",children:R(s.billing_address,50)})})]}),e.jsx("div",{className:"bg-neutral-50 px-4 sm:px-5 py-3 mt-auto rounded-b-xl border-t border-neutral-100",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-neutral-600",children:["Status: ",e.jsx("span",{className:"font-medium text-neutral-800",children:w(s.engagement_status)})]}),e.jsxs("span",{className:"text-accent-600 font-medium flex items-center",children:["View details",e.jsx(F,{className:"ml-1 h-3 w-3 transform group-hover:translate-x-0.5 transition-transform"})]})]})})]},s.id))}):e.jsxs("div",{className:"card p-5 sm:p-6 text-center animate-fade-in",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-neutral-100 flex items-center justify-center text-neutral-400",children:e.jsx(f,{className:"h-8 w-8"})})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-neutral-900",children:"No clients found"}),e.jsx("p",{className:"mt-2 text-sm text-neutral-500 max-w-md mx-auto",children:t.length>0?"No clients match your search criteria. Try adjusting your filters.":"Get started by adding your first client."}),t.length===0&&e.jsx("div",{className:"mt-6",children:e.jsxs(d,{to:"/clients/new",className:"btn btn-primary btn-md",children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Add Client"]})})]})]})};export{D as default};
