import{u as f,b as p,r as m,j as e,V as l}from"./index-DMTdQ3St.js";import{u as g}from"./index.esm-DkrFlcfS.js";import{S as j}from"./save-Cq4unuqE.js";const w=()=>{const{user:a}=f(),{bankingInfo:s,loading:n,error:o,fetchBankingInfo:d,updateBankingInfo:i}=p(),{register:t,handleSubmit:u,reset:c,formState:{errors:r,isDirty:b}}=g();m.useEffect(()=>{a&&d(a.id)},[a,d]),m.useEffect(()=>{s&&c({account_holder:s.account_holder,account_number:s.account_number,ifsc_code:s.ifsc_code,bank_name:s.bank_name,branch:s.branch})},[s,c]);const x=async h=>{if(a)try{await i({...h,user_id:a.id}),l.success("Banking information updated successfully")}catch{l.error("Failed to update banking information")}};return n&&!s?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-0",children:e.jsxs("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:[e.jsxs("div",{className:"px-4 py-4 sm:px-6 border-b",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Banking Information"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Your banking details for invoice payments"})]}),o&&e.jsx("div",{className:"m-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:o}),e.jsxs("form",{onSubmit:u(x),children:[e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"account_holder",className:"block text-sm font-medium text-gray-700",children:"Account Holder Name"}),e.jsx("input",{type:"text",id:"account_holder",className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${r.account_holder?"border-red-300":""}`,placeholder:"Full name as in bank records",...t("account_holder",{required:"Account holder name is required"})}),r.account_holder&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.account_holder.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"account_number",className:"block text-sm font-medium text-gray-700",children:"Account Number"}),e.jsx("input",{type:"text",id:"account_number",className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${r.account_number?"border-red-300":""}`,placeholder:"Your bank account number",...t("account_number",{required:"Account number is required"})}),r.account_number&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.account_number.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ifsc_code",className:"block text-sm font-medium text-gray-700",children:"IFSC Code"}),e.jsx("input",{type:"text",id:"ifsc_code",className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${r.ifsc_code?"border-red-300":""}`,placeholder:"IFSC code of your bank branch",...t("ifsc_code",{required:"IFSC code is required"})}),r.ifsc_code&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.ifsc_code.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bank_name",className:"block text-sm font-medium text-gray-700",children:"Bank Name"}),e.jsx("input",{type:"text",id:"bank_name",className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${r.bank_name?"border-red-300":""}`,placeholder:"Name of your bank",...t("bank_name",{required:"Bank name is required"})}),r.bank_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.bank_name.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"branch",className:"block text-sm font-medium text-gray-700",children:"Branch"}),e.jsx("input",{type:"text",id:"branch",className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${r.branch?"border-red-300":""}`,placeholder:"Your bank branch name",...t("branch",{required:"Branch name is required"})}),r.branch&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.branch.message})]})]})}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:e.jsxs("button",{type:"submit",disabled:n||!b,className:"w-full sm:w-auto inline-flex justify-center items-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),n?"Saving...":"Save Changes"]})})]})]})})};export{w as default};
