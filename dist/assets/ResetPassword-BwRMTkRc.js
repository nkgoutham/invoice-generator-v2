import{a as j,u as v,r as l,V as a,j as e}from"./index-DMTdQ3St.js";import{u as N}from"./index.esm-DkrFlcfS.js";import{L as c}from"./lock-DxvZPBgN.js";import{A as y}from"./arrow-right-Q1W384Tb.js";const z=()=>{const o=j(),{updatePassword:m,loading:d,error:n}=v(),[t,u]=l.useState(!1),[x,h]=l.useState(!1),{register:i,handleSubmit:w,watch:p,reset:f,formState:{errors:s}}=N(),g=p("password","");l.useEffect(()=>{new URLSearchParams(window.location.hash.substring(1)).get("access_token")||(a.error("Invalid password reset link. Please try again."),o("/login"))},[o]);const b=async r=>{if(r.password!==r.confirmPassword){a.error("Passwords do not match");return}try{await m(r.password),h(!0),a.success("Password has been updated successfully"),f(),setTimeout(()=>{o("/login")},3e3)}catch{a.error(n||"Failed to update password")}};return e.jsxs("div",{className:"min-h-screen bg-neutral-50 flex flex-col justify-center px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md text-center",children:[e.jsx("img",{src:"/full_logo.png",alt:"InvoicePro Logo",className:"h-24 mx-auto mb-6"}),e.jsx("h2",{className:"text-center text-2xl font-bold tracking-tight text-neutral-900",children:"Reset Your Password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-neutral-600",children:"Enter your new password below"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"card px-6 py-8 sm:px-10",children:[n&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm flex items-center animate-fade-in",children:[e.jsx("svg",{className:"h-5 w-5 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n]}),x?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"rounded-full bg-green-100 w-12 h-12 flex items-center justify-center mx-auto",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Password updated successfully!"}),e.jsx("p",{className:"text-sm text-gray-500",children:"You will be redirected to the login page in a moment."})]}):e.jsxs("form",{className:"space-y-6",onSubmit:w(b),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsxs("div",{className:"mt-1 relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(c,{className:"h-5 w-5 text-gray-400 group-focus-within:text-accent-500 transition-colors duration-150"})}),e.jsx("input",{id:"password",type:t?"text":"password",className:`block w-full pl-10 pr-10 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${s.password?"border-red-300":"border-gray-300"}`,placeholder:"••••••••",...i("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("button",{type:"button",onClick:()=>u(!t),className:"text-gray-400 hover:text-gray-600 focus:outline-none transition-colors",children:e.jsx("span",{className:"text-xs font-medium",children:t?"Hide":"Show"})})})]}),s.password&&e.jsxs("p",{className:"mt-1.5 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"h-3 w-3 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.password.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsxs("div",{className:"mt-1 relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(c,{className:"h-5 w-5 text-gray-400 group-focus-within:text-accent-500 transition-colors duration-150"})}),e.jsx("input",{id:"confirmPassword",type:t?"text":"password",className:`block w-full pl-10 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${s.confirmPassword?"border-red-300":"border-gray-300"}`,placeholder:"••••••••",...i("confirmPassword",{required:"Please confirm your password",validate:r=>r===g||"Passwords do not match"})})]}),s.confirmPassword&&e.jsxs("p",{className:"mt-1.5 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"h-3 w-3 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.confirmPassword.message]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:d?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"h-4 w-4 mr-2 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Updating Password..."]}):e.jsxs(e.Fragment,{children:["Update Password",e.jsx(y,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})})]})]})})]})};export{z as default};
