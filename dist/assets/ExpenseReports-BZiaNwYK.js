import{e as b,m as st,r as C,j as i,u as Dt,L as Me,R as Tt,F as Rt,D as Ct,V as Ue}from"./index-DMTdQ3St.js";import{u as $t}from"./expenseStore-BpTe1G7s.js";import{u as It}from"./clientStore-Bedc05g4.js";import{u as Lt}from"./currencyStore-CTj-PELi.js";import{e as Ve}from"./react-datepicker-WcPCAPPC.js";import{f as Z}from"./helpers-kgrKKtTT.js";import{e as z,f as I,_ as lt,q as Ft,r as ct,s as Bt,l as q,t as Ie,v as G,L as K,w as ut,x as Le,y as dt,D as ft,G as mt,C as pt,b as H,j as X,S as Kt,A as ht,z as Mt,a as ee,d as yt,i as ne,g as vt,B as bt,E as Ut,F as pe,H as We,I as he,u as gt,J as _e,h as Vt,k as ze,K as Wt,n as Fe,X as ve,Y as be,o as xt,M as jt,N as zt,R as ke,T as Se,O as Gt,p as Ge}from"./generateCategoricalChart-xdCEiT34.js";import{A as Ht}from"./arrow-left-DgZupmuo.js";import{D as Yt}from"./download-CvjdIAOH.js";import{C as He}from"./calendar-CRwE0Pfy.js";import{T as Zt}from"./tag-ilgYDLAU.js";import{B as qt}from"./building-BwG9NAGn.js";import"./defineProperty-DroM-Dno.js";var Xt=["points","className","baseLinePoints","connectNulls"];function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}function Jt(e,t){if(e==null)return{};var n=Qt(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ye(e){return nr(e)||rr(e)||tr(e)||er()}function er(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tr(e,t){if(e){if(typeof e=="string")return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}}function rr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nr(e){if(Array.isArray(e))return Ee(e)}function Ee(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ze=function(t){return t&&t.x===+t.x&&t.y===+t.y},ar=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){Ze(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),Ze(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},ue=function(t,n){var r=ar(t);n&&(r=[r.reduce(function(s,o){return[].concat(Ye(s),Ye(o))},[])]);var a=r.map(function(s){return s.reduce(function(o,c,d){return"".concat(o).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},ir=function(t,n,r){var a=ue(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(ue(n.reverse(),r).slice(1))},or=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,s=t.connectNulls,o=Jt(t,Xt);if(!n||!n.length)return null;var c=z("recharts-polygon",r);if(a&&a.length){var d=o.stroke&&o.stroke!=="none",u=ir(n,a,s);return b.createElement("g",{className:c},b.createElement("path",ae({},I(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),d?b.createElement("path",ae({},I(o,!0),{fill:"none",d:ue(n,s)})):null,d?b.createElement("path",ae({},I(o,!0),{fill:"none",d:ue(a,s)})):null)}var m=ue(n,s);return b.createElement("path",ae({},I(o,!0),{fill:m.slice(-1)==="Z"?o.fill:"none",className:c,d:m}))},sr=lt,lr=Ft,cr=ct;function ur(e,t){return e&&e.length?sr(e,cr(t),lr):void 0}var dr=ur;const fr=st(dr);var mr=lt,pr=ct,hr=Bt;function yr(e,t){return e&&e.length?mr(e,pr(t),hr):void 0}var vr=yr;const br=st(vr);var gr=["cx","cy","angle","ticks","axisLine"],xr=["ticks","tick","angle","tickFormatter","stroke"];function oe(e){"@babel/helpers - typeof";return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(e)}function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qe(Object(n),!0).forEach(function(r){we(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xe(e,t){if(e==null)return{};var n=jr(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jr(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ar(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wt(r.key),r)}}function wr(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nr(e,t,n){return t=ge(t),Or(e,At()?Reflect.construct(t,n||[],ge(e).constructor):t.apply(e,n))}function Or(e,t){if(t&&(oe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pr(e)}function Pr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(At=function(){return!!e})()}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ge(e)}function kr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},De(e,t)}function we(e,t,n){return t=wt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e){var t=Sr(e,"string");return oe(t)=="symbol"?t:t+""}function Sr(e,t){if(oe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(oe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ne=function(e){function t(){return Ar(this,t),Nr(this,t,arguments)}return kr(t,e),wr(t,[{key:"getTickValueCoord",value:function(r){var a=r.coordinate,s=this.props,o=s.angle,c=s.cx,d=s.cy;return G(c,d,a,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,a;switch(r){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var r=this.props,a=r.cx,s=r.cy,o=r.angle,c=r.ticks,d=fr(c,function(m){return m.coordinate||0}),u=br(c,function(m){return m.coordinate||0});return{cx:a,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,s=r.cy,o=r.angle,c=r.ticks,d=r.axisLine,u=Xe(r,gr),m=c.reduce(function(p,f){return[Math.min(p[0],f.coordinate),Math.max(p[1],f.coordinate)]},[1/0,-1/0]),v=G(a,s,m[0],o),h=G(a,s,m[1],o),g=J(J(J({},I(u,!1)),{},{fill:"none"},I(d,!1)),{},{x1:v.x,y1:v.y,x2:h.x,y2:h.y});return b.createElement("line",de({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var r=this,a=this.props,s=a.ticks,o=a.tick,c=a.angle,d=a.tickFormatter,u=a.stroke,m=Xe(a,xr),v=this.getTickTextAnchor(),h=I(m,!1),g=I(o,!1),p=s.map(function(f,j){var N=r.getTickValueCoord(f),O=J(J(J(J({textAnchor:v,transform:"rotate(".concat(90-c,", ").concat(N.x,", ").concat(N.y,")")},h),{},{stroke:"none",fill:u},g),{},{index:j},N),{},{payload:f});return b.createElement(K,de({className:z("recharts-polar-radius-axis-tick",ut(o)),key:"tick-".concat(f.coordinate)},Le(r.props,f,j)),t.renderTickItem(o,O,d?d(f.value,j):f.value))});return b.createElement(K,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,a=r.ticks,s=r.axisLine,o=r.tick;return!a||!a.length?null:b.createElement(K,{className:z("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),dt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,a,s){var o;return b.isValidElement(r)?o=b.cloneElement(r,a):q(r)?o=r(a):o=b.createElement(Ie,de({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(C.PureComponent);we(Ne,"displayName","PolarRadiusAxis");we(Ne,"axisType","radiusAxis");we(Ne,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function se(e){"@babel/helpers - typeof";return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},se(e)}function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(this,arguments)}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qe(Object(n),!0).forEach(function(r){Oe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ot(r.key),r)}}function Er(e,t,n){return t&&et(e.prototype,t),n&&et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dr(e,t,n){return t=xe(t),Tr(e,Nt()?Reflect.construct(t,n||[],xe(e).constructor):t.apply(e,n))}function Tr(e,t){if(t&&(se(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rr(e)}function Rr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nt=function(){return!!e})()}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xe(e)}function Cr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}function Te(e,t){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Te(e,t)}function Oe(e,t,n){return t=Ot(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e){var t=$r(e,"string");return se(t)=="symbol"?t:t+""}function $r(e,t){if(se(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(se(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ir=Math.PI/180,tt=1e-5,Pe=function(e){function t(){return _r(this,t),Dr(this,t,arguments)}return Cr(t,e),Er(t,[{key:"getTickLineCoord",value:function(r){var a=this.props,s=a.cx,o=a.cy,c=a.radius,d=a.orientation,u=a.tickSize,m=u||8,v=G(s,o,c,r.coordinate),h=G(s,o,c+(d==="inner"?-1:1)*m,r.coordinate);return{x1:v.x,y1:v.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var a=this.props.orientation,s=Math.cos(-r.coordinate*Ir),o;return s>tt?o=a==="outer"?"start":"end":s<-tt?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,s=r.cy,o=r.radius,c=r.axisLine,d=r.axisLineType,u=Q(Q({},I(this.props,!1)),{},{fill:"none"},I(c,!1));if(d==="circle")return b.createElement(ft,te({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:s,r:o}));var m=this.props.ticks,v=m.map(function(h){return G(a,s,o,h.coordinate)});return b.createElement(or,te({className:"recharts-polar-angle-axis-line"},u,{points:v}))}},{key:"renderTicks",value:function(){var r=this,a=this.props,s=a.ticks,o=a.tick,c=a.tickLine,d=a.tickFormatter,u=a.stroke,m=I(this.props,!1),v=I(o,!1),h=Q(Q({},m),{},{fill:"none"},I(c,!1)),g=s.map(function(p,f){var j=r.getTickLineCoord(p),N=r.getTickTextAnchor(p),O=Q(Q(Q({textAnchor:N},m),{},{stroke:"none",fill:u},v),{},{index:f,payload:p,x:j.x2,y:j.y2});return b.createElement(K,te({className:z("recharts-polar-angle-axis-tick",ut(o)),key:"tick-".concat(p.coordinate)},Le(r.props,p,f)),c&&b.createElement("line",te({className:"recharts-polar-angle-axis-tick-line"},h,j)),o&&t.renderTickItem(o,O,d?d(p.value,f):p.value))});return b.createElement(K,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var r=this.props,a=r.ticks,s=r.radius,o=r.axisLine;return s<=0||!a||!a.length?null:b.createElement(K,{className:z("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,a,s){var o;return b.isValidElement(r)?o=b.cloneElement(r,a):q(r)?o=r(a):o=b.createElement(Ie,te({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(C.PureComponent);Oe(Pe,"displayName","PolarAngleAxis");Oe(Pe,"axisType","angleAxis");Oe(Pe,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var ye;function le(e){"@babel/helpers - typeof";return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(e)}function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rt(Object(n),!0).forEach(function(r){U(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kt(r.key),r)}}function Fr(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Br(e,t,n){return t=je(t),Kr(e,Pt()?Reflect.construct(t,n||[],je(e).constructor):t.apply(e,n))}function Kr(e,t){if(t&&(le(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mr(e)}function Mr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pt=function(){return!!e})()}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},je(e)}function Ur(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}function Re(e,t){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Re(e,t)}function U(e,t,n){return t=kt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kt(e){var t=Vr(e,"string");return le(t)=="symbol"?t:t+""}function Vr(e,t){if(le(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(le(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y=function(e){function t(n){var r;return Lr(this,t),r=Br(this,t,[n]),U(r,"pieRef",null),U(r,"sectorRefs",[]),U(r,"id",gt("recharts-pie-")),U(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),q(a)&&a()}),U(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),q(a)&&a()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return Ur(t,e),Fr(t,[{key:"isActiveIndex",value:function(r){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(r)!==-1:r===a}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,c=s.labelLine,d=s.dataKey,u=s.valueKey,m=I(this.props,!1),v=I(o,!1),h=I(c,!1),g=o&&o.offsetRadius||20,p=r.map(function(f,j){var N=(f.startAngle+f.endAngle)/2,O=G(f.cx,f.cy,f.outerRadius+g,N),$=D(D(D(D({},m),f),{},{stroke:"none"},v),{},{index:j,textAnchor:t.getTextAnchor(O.x,f.cx)},O),L=D(D(D(D({},m),f),{},{fill:"none",stroke:f.fill},h),{},{index:j,points:[G(f.cx,f.cy,f.outerRadius,N),O]}),T=d;return H(d)&&H(u)?T="value":H(d)&&(T=u),b.createElement(K,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(j)},c&&t.renderLabelLineItem(c,L,"line"),t.renderLabelItem(o,$,X(f,T)))});return b.createElement(K,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(r){var a=this,s=this.props,o=s.activeShape,c=s.blendStroke,d=s.inactiveShape;return r.map(function(u,m){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var v=a.isActiveIndex(m),h=d&&a.hasActiveIndex()?d:null,g=v?o:h,p=D(D({},u),{},{stroke:c?u.fill:u.stroke,tabIndex:-1});return b.createElement(K,ie({ref:function(j){j&&!a.sectorRefs.includes(j)&&a.sectorRefs.push(j)},tabIndex:-1,className:"recharts-pie-sector"},Le(a.props,u,m),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(m)}),b.createElement(Kt,ie({option:g,isActive:v,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,a=this.props,s=a.sectors,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,m=a.animationId,v=this.state,h=v.prevSectors,g=v.prevIsAnimationActive;return b.createElement(ht,{begin:c,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var f=p.t,j=[],N=s&&s[0],O=N.startAngle;return s.forEach(function($,L){var T=h&&h[L],x=L>0?Mt($,"paddingAngle",0):0;if(T){var P=ee(T.endAngle-T.startAngle,$.endAngle-$.startAngle),w=D(D({},$),{},{startAngle:O+x,endAngle:O+P(f)+x});j.push(w),O=w.endAngle}else{var R=$.endAngle,k=$.startAngle,F=ee(0,R-k),S=F(f),B=D(D({},$),{},{startAngle:O+x,endAngle:O+S+x});j.push(B),O=B.endAngle}}),b.createElement(K,null,r.renderSectorsStatically(j))})}},{key:"attachKeyboardHandlers",value:function(r){var a=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var c=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[c].focus(),a.setState({sectorToFocus:c});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,a=r.sectors,s=r.isAnimationActive,o=this.state.prevSectors;return s&&a&&a.length&&(!o||!yt(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,a=this.props,s=a.hide,o=a.sectors,c=a.className,d=a.label,u=a.cx,m=a.cy,v=a.innerRadius,h=a.outerRadius,g=a.isAnimationActive,p=this.state.isAnimationFinished;if(s||!o||!o.length||!ne(u)||!ne(m)||!ne(v)||!ne(h))return null;var f=z("recharts-pie",c);return b.createElement(K,{tabIndex:this.props.rootTabIndex,className:f,ref:function(N){r.pieRef=N}},this.renderSectors(),d&&this.renderLabels(o),dt.renderCallByParent(this.props,null,!1),(!g||p)&&vt.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return a.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:r.sectors!==a.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,a){return r>a?"start":r<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,a,s){if(b.isValidElement(r))return b.cloneElement(r,a);if(q(r))return r(a);var o=z("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return b.createElement(pt,ie({},a,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,a,s){if(b.isValidElement(r))return b.cloneElement(r,a);var o=s;if(q(r)&&(o=r(a),b.isValidElement(o)))return o;var c=z("recharts-pie-label-text",typeof r!="boolean"&&!q(r)?r.className:"");return b.createElement(Ie,ie({},a,{alignmentBaseline:"middle",className:c}),o)}}])}(C.PureComponent);ye=Y;U(Y,"displayName","Pie");U(Y,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!mt.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});U(Y,"parseDeltaAngle",function(e,t){var n=he(t-e),r=Math.min(Math.abs(t-e),360);return n*r});U(Y,"getRealPieData",function(e){var t=e.data,n=e.children,r=I(e,!1),a=bt(n,_e);return t&&t.length?t.map(function(s,o){return D(D(D({payload:s},r),s),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(s){return D(D({},r),s.props)}):[]});U(Y,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,s=t.height,o=Ut(a,s),c=r+pe(e.cx,a,a/2),d=n+pe(e.cy,s,s/2),u=pe(e.innerRadius,o,0),m=pe(e.outerRadius,o,o*.8),v=e.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:m,maxRadius:v}});U(Y,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?D(D({},t.type.defaultProps),t.props):t.props,a=ye.getRealPieData(r);if(!a||!a.length)return null;var s=r.cornerRadius,o=r.startAngle,c=r.endAngle,d=r.paddingAngle,u=r.dataKey,m=r.nameKey,v=r.valueKey,h=r.tooltipType,g=Math.abs(r.minAngle),p=ye.parseCoordinateOfPie(r,n),f=ye.parseDeltaAngle(o,c),j=Math.abs(f),N=u;H(u)&&H(v)?(We(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N="value"):H(u)&&(We(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N=v);var O=a.filter(function(w){return X(w,N,0)!==0}).length,$=(j>=360?O:O-1)*d,L=j-O*g-$,T=a.reduce(function(w,R){var k=X(R,N,0);return w+(ne(k)?k:0)},0),x;if(T>0){var P;x=a.map(function(w,R){var k=X(w,N,0),F=X(w,m,R),S=(ne(k)?k:0)/T,B;R?B=P.endAngle+he(f)*d*(k!==0?1:0):B=o;var y=B+he(f)*((k!==0?g:0)+S*L),A=(B+y)/2,l=(p.innerRadius+p.outerRadius)/2,V=[{name:F,value:k,payload:w,dataKey:N,type:h}],_=G(p.cx,p.cy,l,A);return P=D(D(D({percent:S,cornerRadius:s,name:F,tooltipPayload:V,midAngle:A,middleRadius:l,tooltipPosition:_},w),p),{},{value:X(w,N),startAngle:B,endAngle:y,payload:w,paddingAngle:he(f)*d}),P})}return D(D({},p),{},{sectors:x,data:a})});var Wr=["type","layout","connectNulls","ref"],zr=["key"];function ce(e){"@babel/helpers - typeof";return ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(e)}function at(e,t){if(e==null)return{};var n=Gr(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Gr(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?it(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function re(e){return qr(e)||Zr(e)||Yr(e)||Hr()}function Hr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yr(e,t){if(e){if(typeof e=="string")return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}}function Zr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qr(e){if(Array.isArray(e))return Ce(e)}function Ce(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_t(r.key),r)}}function Jr(e,t,n){return t&&ot(e.prototype,t),n&&ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qr(e,t,n){return t=Ae(t),en(e,St()?Reflect.construct(t,n||[],Ae(e).constructor):t.apply(e,n))}function en(e,t){if(t&&(ce(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tn(e)}function tn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function St(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(St=function(){return!!e})()}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ae(e)}function rn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},$e(e,t)}function W(e,t,n){return t=_t(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e){var t=nn(e,"string");return ce(t)=="symbol"?t:t+""}function nn(e,t){if(ce(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ce(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var me=function(e){function t(){var n;Xr(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=Qr(this,t,[].concat(a)),W(n,"state",{isAnimationFinished:!0,totalLength:0}),W(n,"generateSimpleStrokeDasharray",function(o,c){return"".concat(c,"px ").concat(o-c,"px")}),W(n,"getStrokeDasharray",function(o,c,d){var u=d.reduce(function(N,O){return N+O});if(!u)return n.generateSimpleStrokeDasharray(c,o);for(var m=Math.floor(o/u),v=o%u,h=c-o,g=[],p=0,f=0;p<d.length;f+=d[p],++p)if(f+d[p]>v){g=[].concat(re(d.slice(0,p)),[v-f]);break}var j=g.length%2===0?[0,h]:[h];return[].concat(re(t.repeat(d,m)),re(g),j).map(function(N){return"".concat(N,"px")}).join(", ")}),W(n,"id",gt("recharts-line-")),W(n,"pathRef",function(o){n.mainCurve=o}),W(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),W(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return rn(t,e),Jr(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,c=s.xAxis,d=s.yAxis,u=s.layout,m=s.children,v=bt(m,Wt);if(!v)return null;var h=function(f,j){return{x:f.x,y:f.y,value:f.value,errorVal:X(f.payload,j)}},g={clipPath:r?"url(#clipPath-".concat(a,")"):null};return b.createElement(K,g,v.map(function(p){return b.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:o,xAxis:c,yAxis:d,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,a,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var c=this.props,d=c.dot,u=c.points,m=c.dataKey,v=I(this.props,!1),h=I(d,!0),g=u.map(function(f,j){var N=M(M(M({key:"dot-".concat(j),r:3},v),h),{},{index:j,cx:f.x,cy:f.y,value:f.value,dataKey:m,payload:f.payload,points:u});return t.renderDotItem(d,N)}),p={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(s,")"):null};return b.createElement(K,fe({className:"recharts-line-dots",key:"dots"},p),g)}},{key:"renderCurveStatically",value:function(r,a,s,o){var c=this.props,d=c.type,u=c.layout,m=c.connectNulls;c.ref;var v=at(c,Wr),h=M(M(M({},I(v,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(s,")"):null,points:r},o),{},{type:d,layout:u,connectNulls:m});return b.createElement(pt,fe({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,a){var s=this,o=this.props,c=o.points,d=o.strokeDasharray,u=o.isAnimationActive,m=o.animationBegin,v=o.animationDuration,h=o.animationEasing,g=o.animationId,p=o.animateNewValues,f=o.width,j=o.height,N=this.state,O=N.prevPoints,$=N.totalLength;return b.createElement(ht,{begin:m,duration:v,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(L){var T=L.t;if(O){var x=O.length/c.length,P=c.map(function(S,B){var y=Math.floor(B*x);if(O[y]){var A=O[y],l=ee(A.x,S.x),V=ee(A.y,S.y);return M(M({},S),{},{x:l(T),y:V(T)})}if(p){var _=ee(f*2,S.x),E=ee(j/2,S.y);return M(M({},S),{},{x:_(T),y:E(T)})}return M(M({},S),{},{x:S.x,y:S.y})});return s.renderCurveStatically(P,r,a)}var w=ee(0,$),R=w(T),k;if(d){var F="".concat(d).split(/[,\s]+/gim).map(function(S){return parseFloat(S)});k=s.getStrokeDasharray(R,$,F)}else k=s.generateSimpleStrokeDasharray($,R);return s.renderCurveStatically(c,r,a,{strokeDasharray:k})})}},{key:"renderCurve",value:function(r,a){var s=this.props,o=s.points,c=s.isAnimationActive,d=this.state,u=d.prevPoints,m=d.totalLength;return c&&o&&o.length&&(!u&&m>0||!yt(u,o))?this.renderCurveWithAnimation(r,a):this.renderCurveStatically(o,r,a)}},{key:"render",value:function(){var r,a=this.props,s=a.hide,o=a.dot,c=a.points,d=a.className,u=a.xAxis,m=a.yAxis,v=a.top,h=a.left,g=a.width,p=a.height,f=a.isAnimationActive,j=a.id;if(s||!c||!c.length)return null;var N=this.state.isAnimationFinished,O=c.length===1,$=z("recharts-line",d),L=u&&u.allowDataOverflow,T=m&&m.allowDataOverflow,x=L||T,P=H(j)?this.id:j,w=(r=I(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},R=w.r,k=R===void 0?3:R,F=w.strokeWidth,S=F===void 0?2:F,B=Vt(o)?o:{},y=B.clipDot,A=y===void 0?!0:y,l=k*2+S;return b.createElement(K,{className:$},L||T?b.createElement("defs",null,b.createElement("clipPath",{id:"clipPath-".concat(P)},b.createElement("rect",{x:L?h:h-g/2,y:T?v:v-p/2,width:L?g:g*2,height:T?p:p*2})),!A&&b.createElement("clipPath",{id:"clipPath-dots-".concat(P)},b.createElement("rect",{x:h-l/2,y:v-l/2,width:g+l,height:p+l}))):null,!O&&this.renderCurve(x,P),this.renderErrorBar(x,P),(O||o)&&this.renderDots(x,A,P),(!f||N)&&vt.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:a.curPoints}:r.points!==a.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,a){for(var s=r.length%2!==0?[].concat(re(r),[0]):r,o=[],c=0;c<a;++c)o=[].concat(re(o),re(s));return o}},{key:"renderDotItem",value:function(r,a){var s;if(b.isValidElement(r))s=b.cloneElement(r,a);else if(q(r))s=r(a);else{var o=a.key,c=at(a,zr),d=z("recharts-line-dot",typeof r!="boolean"?r.className:"");s=b.createElement(ft,fe({key:o},c,{className:d}))}return s}}])}(C.PureComponent);W(me,"displayName","Line");W(me,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!mt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});W(me,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,a=e.xAxisTicks,s=e.yAxisTicks,o=e.dataKey,c=e.bandSize,d=e.displayedData,u=e.offset,m=t.layout,v=d.map(function(h,g){var p=X(h,o);return m==="horizontal"?{x:ze({axis:n,ticks:a,bandSize:c,entry:h,index:g}),y:H(p)?null:r.scale(p),value:p,payload:h}:{x:H(p)?null:n.scale(p),y:ze({axis:r,ticks:s,bandSize:c,entry:h,index:g}),value:p,payload:h}});return M({points:v,layout:m},u)});var an=Fe({chartName:"LineChart",GraphicalChild:me,axisComponents:[{axisType:"xAxis",AxisComp:ve},{axisType:"yAxis",AxisComp:be}],formatAxisMap:xt}),on=Fe({chartName:"BarChart",GraphicalChild:jt,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ve},{axisType:"yAxis",AxisComp:be}],formatAxisMap:xt}),sn=Fe({chartName:"PieChart",GraphicalChild:Y,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Pe},{axisType:"radiusAxis",AxisComp:Ne}],formatAxisMap:zt,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const ln=({expenses:e,categories:t,clients:n,startDate:r,endDate:a})=>{const[s,o]=C.useState("category"),[c,d]=C.useState([]),[u,m]=C.useState([]),[v,h]=C.useState([]),[g,p]=C.useState("INR"),f=x=>{const P=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#F97316","#14B8A6","#6B7280","#0EA5E9","#84CC16","#9333EA","#F43F5E","#0891B2","#4F46E5"];if(x<=P.length)return P.slice(0,x);const w=[...P],R=x-P.length;for(let k=0;k<R;k++){const F=k*137%360;w.push(`hsl(${F}, 70%, 50%)`)}return w};C.useEffect(()=>{if(e.length>0){const x={};t.forEach(y=>{x[y.id]={inr:0,usd:0,name:y.name,color:y.color}}),x.uncategorized={inr:0,usd:0,name:"Uncategorized",color:"#6B7280"},e.forEach(y=>{const A=y.category_id||"uncategorized";x[A]||(x[A]={inr:0,usd:0,name:"Unknown Category",color:"#6B7280"}),y.currency==="INR"?x[A].inr+=y.amount:x[A].usd+=y.amount});const P=Object.values(x).filter(y=>y.inr>0||y.usd>0).map(y=>({name:y.name,value:g==="INR"?y.inr:y.usd,color:y.color})).sort((y,A)=>A.value-y.value);d(P);const w={};w.none={inr:0,usd:0,name:"No Client"},e.forEach(y=>{const A=y.client_id||"none";if(!w[A]){const l=n.find(V=>V.id===A);w[A]={inr:0,usd:0,name:l?l.company_name||l.name:"Unknown Client"}}y.currency==="INR"?w[A].inr+=y.amount:w[A].usd+=y.amount});const R=Object.entries(w).filter(([y,A])=>A.inr>0||A.usd>0).map(([y,A],l)=>({name:A.name,value:g==="INR"?A.inr:A.usd,id:y})).sort((y,A)=>A.value-y.value);m(R);const k={},F=Math.ceil((a.getTime()-r.getTime())/(1e3*60*60*24));let S="day";F>90?S="month":F>30&&(S="week"),e.forEach(y=>{const A=new Date(y.date);let l;if(S==="day")l=y.date;else if(S==="week"){const V=Math.ceil((A.getDate()+new Date(A.getFullYear(),A.getMonth(),1).getDay())/7);l=`${A.getFullYear()}-${(A.getMonth()+1).toString().padStart(2,"0")}-W${V}`}else l=`${A.getFullYear()}-${(A.getMonth()+1).toString().padStart(2,"0")}`;k[l]||(k[l]={inr:0,usd:0,date:l}),y.currency==="INR"?k[l].inr+=y.amount:k[l].usd+=y.amount});const B=Object.values(k).map(y=>({name:j(y.date,S),value:g==="INR"?y.inr:y.usd,date:y.date})).sort((y,A)=>y.date.localeCompare(A.date));h(B)}},[e,t,n,g,r,a]);const j=(x,P)=>{if(P==="day")return new Date(x).toLocaleDateString(void 0,{month:"short",day:"numeric"});if(P==="week"){const[w,R,k]=x.split("-"),F=k.substring(1);return`${R}/${w} W${F}`}else{const[w,R]=x.split("-");return new Date(parseInt(w),parseInt(R)-1,1).toLocaleDateString(void 0,{month:"short",year:"numeric"})}},N=({active:x,payload:P,label:w})=>x&&P&&P.length?i.jsxs("div",{className:"bg-white p-3 shadow-lg border border-gray-200 rounded-lg",children:[i.jsx("p",{className:"font-medium text-sm",children:w}),i.jsx("p",{className:"text-sm",children:Z(P[0].value,g)})]}):null,O=()=>s==="category"?$():s==="client"?L():T(),$=()=>c.length===0?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("p",{className:"text-gray-500",children:"No data available for the selected filters"})}):(c.map(x=>x.color),i.jsx("div",{className:"h-80",children:i.jsx(ke,{width:"100%",height:"100%",children:i.jsxs(sn,{children:[i.jsx(Y,{data:c,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:x,percent:P})=>`${x}: ${(P*100).toFixed(0)}%`,children:c.map((x,P)=>i.jsx(_e,{fill:x.color},`cell-${P}`))}),i.jsx(Se,{content:i.jsx(N,{})}),i.jsx(Gt,{})]})})})),L=()=>{if(u.length===0)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("p",{className:"text-gray-500",children:"No data available for the selected filters"})});const x=f(u.length);return i.jsx("div",{className:"h-80",children:i.jsx(ke,{width:"100%",height:"100%",children:i.jsxs(on,{data:u,layout:"vertical",margin:{top:5,right:30,left:100,bottom:5},children:[i.jsx(Ge,{strokeDasharray:"3 3",horizontal:!0,vertical:!1}),i.jsx(ve,{type:"number",tickFormatter:P=>Z(P,g)}),i.jsx(be,{type:"category",dataKey:"name",width:100,tick:{fontSize:12}}),i.jsx(Se,{content:i.jsx(N,{})}),i.jsx(jt,{dataKey:"value",fill:"#3B82F6",children:u.map((P,w)=>i.jsx(_e,{fill:x[w%x.length]},`cell-${w}`))})]})})})},T=()=>v.length===0?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("p",{className:"text-gray-500",children:"No data available for the selected filters"})}):i.jsx("div",{className:"h-80",children:i.jsx(ke,{width:"100%",height:"100%",children:i.jsxs(an,{data:v,margin:{top:5,right:30,left:20,bottom:5},children:[i.jsx(Ge,{strokeDasharray:"3 3"}),i.jsx(ve,{dataKey:"name"}),i.jsx(be,{tickFormatter:x=>Z(x,g,!0)}),i.jsx(Se,{content:i.jsx(N,{})}),i.jsx(me,{type:"monotone",dataKey:"value",stroke:"#3B82F6",strokeWidth:2,activeDot:{r:8}})]})})});return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[i.jsx("button",{onClick:()=>o("category"),className:`px-4 py-2 text-sm font-medium rounded-md ${s==="category"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"By Category"}),i.jsx("button",{onClick:()=>o("client"),className:`px-4 py-2 text-sm font-medium rounded-md ${s==="client"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"By Client"}),i.jsx("button",{onClick:()=>o("time"),className:`px-4 py-2 text-sm font-medium rounded-md ${s==="time"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Over Time"}),i.jsx("div",{className:"ml-auto",children:i.jsxs("div",{className:"flex items-center space-x-2 border border-gray-300 rounded-md",children:[i.jsx("button",{onClick:()=>p("INR"),className:`px-3 py-1.5 text-sm font-medium rounded-l-md ${g==="INR"?"bg-blue-100 text-blue-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"â‚¹ INR"}),i.jsx("button",{onClick:()=>p("USD"),className:`px-3 py-1.5 text-sm font-medium rounded-r-md ${g==="USD"?"bg-blue-100 text-blue-700":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"$ USD"})]})})]}),O()]})},An=()=>{const{user:e}=Dt(),{expenses:t,categories:n,fetchExpenses:r,fetchCategories:a,loading:s}=$t(),{clients:o,fetchClients:c}=It(),{currencySettings:d,fetchCurrencySettings:u}=Lt(),[m,v]=C.useState(()=>{const l=new Date;return l.setDate(1),l.setHours(0,0,0,0),l}),[h,g]=C.useState(()=>{const l=new Date;return l.setHours(23,59,59,999),l}),[p,f]=C.useState("all"),[j,N]=C.useState("all"),[O,$]=C.useState("all"),[L,T]=C.useState("all"),[x,P]=C.useState(!1),[w,R]=C.useState(!1),[k,F]=C.useState([]),[S,B]=C.useState({totalINR:0,totalUSD:0,billableINR:0,billableUSD:0,reimbursableINR:0,reimbursableUSD:0,count:0});C.useEffect(()=>{e&&(r(e.id),a(e.id),c(e.id),u(e.id))},[e,r,a,c,u]),C.useEffect(()=>{if(t.length>0){let l=[...t];l=l.filter(_=>{const E=new Date(_.date);return E>=m&&E<=h}),p!=="all"&&(l=l.filter(_=>_.category_id===p)),j!=="all"&&(l=l.filter(_=>_.client_id===j)),O!=="all"&&(O==="billable"?l=l.filter(_=>_.is_billable):O==="non-billable"?l=l.filter(_=>!_.is_billable):O==="reimbursable"&&(l=l.filter(_=>_.is_reimbursable))),L!=="all"&&(l=l.filter(_=>_.currency===L));const V=l.reduce((_,E)=>(_.count++,E.currency==="INR"?(_.totalINR+=E.amount,E.is_billable&&(_.billableINR+=E.amount),E.is_reimbursable&&(_.reimbursableINR+=E.amount)):(_.totalUSD+=E.amount,E.is_billable&&(_.billableUSD+=E.amount),E.is_reimbursable&&(_.reimbursableUSD+=E.amount)),_),{totalINR:0,totalUSD:0,billableINR:0,billableUSD:0,reimbursableINR:0,reimbursableUSD:0,count:0});F(l),B(V)}},[t,m,h,p,j,O,L]);const y=async()=>{e&&(P(!0),await r(e.id),setTimeout(()=>P(!1),800))},A=()=>{R(!0);try{let l="data:text/csv;charset=utf-8,";l+=`Date,Description,Category,Amount,Currency,Client,Billable,Reimbursable,Payment Method,Notes
`,k.forEach(E=>{var Be,Ke;const Et=[E.date,`"${E.description.replace(/"/g,'""')}"`,((Be=E.category)==null?void 0:Be.name)||"",E.amount,E.currency,((Ke=E.client)==null?void 0:Ke.name)||"",E.is_billable?"Yes":"No",E.is_reimbursable?"Yes":"No",E.payment_method||"",`"${(E.notes||"").replace(/"/g,'""')}"`];l+=Et.join(",")+`
`});const V=encodeURI(l),_=document.createElement("a");_.setAttribute("href",V),_.setAttribute("download",`expense_report_${m.toISOString().split("T")[0]}_to_${h.toISOString().split("T")[0]}.csv`),document.body.appendChild(_),_.click(),document.body.removeChild(_),Ue.success("Report exported successfully")}catch(l){console.error("Error exporting data:",l),Ue.error("Failed to export report")}finally{R(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Me,{to:"/expenses",className:"text-gray-500 hover:text-gray-700 mr-4",children:i.jsx(Ht,{size:20})}),i.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Expense Reports"})]}),i.jsxs("button",{onClick:A,disabled:w||s||k.length===0,className:"w-full sm:w-auto inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[i.jsx(Yt,{className:"mr-2 h-4 w-4"}),w?"Exporting...":"Export CSV"]})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg mb-6",children:[i.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Report Filters"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ve,{selected:m,onChange:l=>v(l),selectsStart:!0,startDate:m,endDate:h,maxDate:h,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",dateFormat:"MMMM d, yyyy"}),i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx(He,{className:"h-5 w-5 text-gray-400"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ve,{selected:h,onChange:l=>g(l),selectsEnd:!0,startDate:m,endDate:h,minDate:m,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",dateFormat:"MMMM d, yyyy"}),i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx(He,{className:"h-5 w-5 text-gray-400"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Zt,{className:"h-5 w-5 text-gray-400"})}),i.jsxs("select",{id:"category-filter",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:p,onChange:l=>f(l.target.value),children:[i.jsx("option",{value:"all",children:"All Categories"}),n.map(l=>i.jsx("option",{value:l.id,children:l.name},l.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"client-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(qt,{className:"h-5 w-5 text-gray-400"})}),i.jsxs("select",{id:"client-filter",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:j,onChange:l=>N(l.target.value),children:[i.jsx("option",{value:"all",children:"All Clients"}),i.jsx("option",{value:"none",children:"No Client"}),o.map(l=>i.jsx("option",{value:l.id,children:l.company_name?`${l.name} (${l.company_name})`:l.name},l.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"billable-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),i.jsxs("select",{id:"billable-filter",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:O,onChange:l=>$(l.target.value),children:[i.jsx("option",{value:"all",children:"All Expenses"}),i.jsx("option",{value:"billable",children:"Billable Only"}),i.jsx("option",{value:"non-billable",children:"Non-Billable Only"}),i.jsx("option",{value:"reimbursable",children:"Reimbursable Only"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"currency-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),i.jsxs("select",{id:"currency-filter",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:L,onChange:l=>T(l.target.value),children:[i.jsx("option",{value:"all",children:"All Currencies"}),i.jsx("option",{value:"INR",children:"INR Only"}),i.jsx("option",{value:"USD",children:"USD Only"})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{type:"button",onClick:y,disabled:x,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[i.jsx(Tt,{className:`mr-2 h-4 w-4 ${x?"animate-spin":""}`}),x?"Refreshing...":"Refresh Data"]})})]})]}),i.jsx("div",{className:"p-4 sm:p-6 bg-gray-50 border-b border-gray-200",children:i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Total Expenses"}),i.jsx("p",{className:"text-xl font-semibold mt-1",children:S.count})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount (INR)"}),i.jsx("p",{className:"text-xl font-semibold mt-1",children:Z(S.totalINR,"INR")})]}),S.totalUSD>0&&i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount (USD)"}),i.jsx("p",{className:"text-xl font-semibold mt-1",children:Z(S.totalUSD,"USD")})]}),S.billableINR>0&&i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Billable (INR)"}),i.jsx("p",{className:"text-xl font-semibold mt-1",children:Z(S.billableINR,"INR")})]}),S.billableUSD>0&&i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Billable (USD)"}),i.jsx("p",{className:"text-xl font-semibold mt-1",children:Z(S.billableUSD,"USD")})]})]})})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg mb-6 overflow-hidden",children:[i.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Expense Analysis"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Visual breakdown of your expenses"})]}),i.jsx("div",{className:"p-4 sm:p-6",children:i.jsx(ln,{expenses:k,categories:n,clients:o,startDate:m,endDate:h})})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[i.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Expense Details"}),i.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Showing ",k.length," expense",k.length!==1?"s":""," for the selected period"]})]}),k.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(l=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(l.date).toLocaleDateString()}),i.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[i.jsx(Me,{to:`/expenses/${l.id}`,className:"hover:text-blue-600",children:l.description}),l.receipt_url&&i.jsxs("a",{href:l.receipt_url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 inline-flex items-center text-xs text-blue-600 hover:text-blue-800",children:[i.jsx(Rt,{className:"h-3 w-3 mr-1"}),"Receipt"]})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:l.category?i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:`${l.category.color}20`,color:l.category.color},children:l.category.name}):i.jsx("span",{className:"text-gray-500",children:"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.client?l.client.company_name||l.client.name:"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:Z(l.amount,l.currency)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:i.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[l.is_billable&&i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Billable"}),l.is_reimbursable&&i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-100 text-amber-800",children:l.reimbursed?"Reimbursed":"Reimbursable"}),l.is_recurring&&i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"Recurring"})]})})]},l.id))})]})}):i.jsxs("div",{className:"p-6 text-center",children:[i.jsx(Ct,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No expenses found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No expenses match your filter criteria. Try adjusting your filters."})]})]})]})};export{An as default};
