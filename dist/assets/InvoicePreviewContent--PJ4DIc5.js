import{r as f,j as e,V as x}from"./index-DMTdQ3St.js";import{a as o,f as n}from"./helpers-kgrKKtTT.js";import{t as N}from"./invoiceDataTransform-CE6YmDep.js";import{h as w,E as k}from"./jspdf.es.min-CZuQBE25.js";const P=({data:h,allowDownload:p=!0})=>{var c;const s=N(h),l=f.useRef(null);s.invoice.currency;const t=s.issuer.primary_color||"#3B82F6",i=s.issuer.secondary_color||"#0EA5E9",u=()=>s.invoice.status==="paid"?"bg-green-100 text-green-800 border-green-200":s.invoice.status==="partially_paid"?"bg-yellow-100 text-yellow-800 border-yellow-200":s.invoice.status==="overdue"?"bg-red-100 text-red-800 border-red-200":s.invoice.status==="sent"?"bg-blue-100 text-blue-800 border-blue-200":"bg-gray-100 text-gray-800 border-gray-200",g=()=>s.invoice.status==="paid"?"Paid":s.invoice.status==="partially_paid"?"Partially Paid":s.invoice.status==="overdue"?"Overdue":s.invoice.status==="sent"?"Pending Payment":s.invoice.status==="draft"?"Draft":"",y=a=>a?{bank_transfer:"Bank Transfer",cash:"Cash",cheque:"Cheque",upi:"UPI",other:"Other"}[a]||"Other":"",b=async()=>{if(l.current)try{const a=l.current.cloneNode(!0);a.classList.add("pdf-mode"),a.style.position="absolute",a.style.left="-9999px",a.style.width="1024px",document.body.appendChild(a);const r=await w(a,{scale:1.5,logging:!1,useCORS:!0,allowTaint:!0,backgroundColor:"#FFFFFF",windowWidth:1200,width:1024});document.body.removeChild(a);const v=r.toDataURL("image/jpeg",.8),d=new k({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),m=210,j=r.height*m/r.width;d.addImage(v,"JPEG",0,0,m,j),d.save(`Invoice-${s.invoice.invoice_number}.pdf`),x.success("PDF downloaded successfully")}catch(a){console.error("Error generating PDF:",a),x.error("Failed to generate PDF")}};return e.jsxs("div",{className:"bg-white min-h-full relative overflow-hidden pdf-ready",ref:l,children:[e.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 rounded-full opacity-10 hidden sm:block print:block pdf-force-show",style:{backgroundColor:t}}),e.jsx("div",{className:"absolute -bottom-32 -left-32 w-96 h-96 rounded-full opacity-10 hidden sm:block print:block pdf-force-show",style:{backgroundColor:i}}),p&&e.jsx("div",{className:"absolute top-4 right-4 z-10 print:hidden",children:e.jsxs("button",{onClick:b,className:"bg-white rounded-md shadow-md px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 border border-gray-200 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download PDF"]})}),e.jsxs("div",{className:"p-6 sm:p-8 md:p-10 max-w-5xl mx-auto relative z-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row print:flex-row justify-between items-start md:items-center print:items-center border-b pb-6 md:pb-8 mb-8",style:{borderColor:`${t}40`},children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[s.issuer.logo_url?e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 print:w-20 print:h-20 rounded-xl shadow-lg overflow-hidden transform rotate-3 hover:rotate-0 transition-transform duration-300 print:shadow-none",children:e.jsx("img",{src:s.issuer.logo_url,alt:"Company Logo",className:"w-full h-full object-contain"})}):e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 print:w-20 print:h-20 rounded-xl shadow-lg flex items-center justify-center transform rotate-3 hover:rotate-0 transition-transform duration-300 print:shadow-none",style:{backgroundColor:`${t}15`,border:`2px solid ${t}30`},children:e.jsx("span",{className:"text-2xl md:text-3xl print:text-3xl font-bold",style:{color:t},children:((c=s.issuer.business_name)==null?void 0:c.charAt(0))||"B"})}),e.jsxs("div",{className:"pt-1",children:[e.jsx("h1",{className:"text-2xl md:text-3xl print:text-3xl font-bold tracking-tight",style:{color:t},children:s.issuer.business_name}),s.issuer.address&&e.jsx("p",{className:"text-gray-600 mt-2 text-sm whitespace-pre-line leading-relaxed",children:s.issuer.address}),e.jsxs("div",{className:"mt-2 space-y-2",children:[s.issuer.phone&&e.jsxs("div",{className:"inline-flex items-center text-gray-600 text-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{className:"leading-none",children:s.issuer.phone})]}),s.issuer.pan_number&&e.jsxs("div",{className:"inline-flex items-center text-gray-600 text-sm ml-0 md:ml-3 print:ml-3",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("span",{className:"leading-none",children:["PAN: ",s.issuer.pan_number]})]})]})]})]}),e.jsxs("div",{className:"text-right mt-6 md:mt-0 print:mt-0",children:[e.jsxs("div",{className:"inline-block relative",children:[e.jsx("div",{className:"absolute -right-5 -top-5 -z-10 w-24 h-24 rounded-full opacity-20 hidden sm:block print:block pdf-force-show",style:{backgroundColor:i}}),e.jsx("div",{className:"absolute -right-3 -top-3 -z-10 w-20 h-20 rounded-full opacity-30 hidden sm:block print:block pdf-force-show",style:{backgroundColor:t}}),e.jsx("h2",{className:"text-3xl md:text-4xl print:text-4xl font-black uppercase tracking-wide",style:{color:t,textShadow:`1px 1px 0 ${i}40`},children:"INVOICE"})]}),e.jsxs("div",{className:"mt-3 px-4 py-3 rounded-lg shadow-md backdrop-blur-sm print:shadow-none",style:{backgroundColor:"rgba(255, 255, 255, 0.8)",border:`1px solid ${t}20`},children:[e.jsxs("p",{className:"text-gray-700 font-medium text-lg md:text-xl print:text-xl mb-3",style:{color:t},children:["#",s.invoice.invoice_number]}),e.jsx("div",{className:"flex flex-col text-sm text-gray-600 space-y-2",children:e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsx("span",{className:"font-medium text-right pr-2",children:"Date:"}),e.jsx("span",{className:"text-left",children:o(s.invoice.issue_date)}),e.jsx("span",{className:"font-medium text-right pr-2 text-red-700",children:"Due Date:"}),e.jsx("span",{className:"text-left",children:o(s.invoice.due_date)})]})}),s.invoice.status&&s.invoice.status!=="draft"&&e.jsx("div",{className:"mt-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${u()}`,style:{boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:g()})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 print:grid-cols-2 gap-6 my-8",children:[e.jsxs("div",{className:"rounded-xl p-5 backdrop-blur-sm relative overflow-hidden",style:{backgroundColor:"rgba(255, 255, 255, 0.7)",border:`1px solid ${t}20`,boxShadow:"0 4px 20px rgba(0,0,0,0.05)"},children:[e.jsx("div",{className:"absolute top-0 left-0 h-full w-1.5 rounded-l-xl",style:{backgroundColor:t}}),e.jsxs("div",{className:"relative",children:[e.jsx("h3",{className:"text-sm uppercase font-bold tracking-wider mb-3",style:{color:t},children:"Bill To"}),e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:s.client.name}),s.client.company_name&&e.jsx("p",{className:"text-gray-700 font-medium",children:s.client.company_name}),e.jsxs("div",{className:"mt-3 space-y-3 text-gray-600",children:[s.client.billing_address&&e.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:s.client.billing_address}),e.jsxs("div",{className:"space-y-1.5 mt-2",children:[s.client.email&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"inline-flex items-center",children:e.jsx("svg",{className:"h-4 w-4 mr-2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("span",{children:s.client.email})]}),s.client.phone&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"inline-flex items-center",children:e.jsx("svg",{className:"h-4 w-4 mr-2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx("span",{children:s.client.phone})]}),s.client.gst_number&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"inline-flex items-center",children:e.jsx("svg",{className:"h-4 w-4 mr-2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("span",{children:["GST: ",s.client.gst_number]})]})]})]})]})]}),e.jsxs("div",{className:"rounded-xl p-5 backdrop-blur-sm relative overflow-hidden",style:{backgroundColor:"rgba(255, 255, 255, 0.7)",border:`1px solid ${i}20`,boxShadow:"0 4px 20px rgba(0,0,0,0.05)"},children:[e.jsx("div",{className:"absolute top-0 left-0 h-full w-1.5 rounded-l-xl",style:{backgroundColor:i}}),e.jsxs("div",{className:"relative",children:[e.jsx("h3",{className:"text-sm uppercase font-bold tracking-wider mb-3",style:{color:i},children:"Payment Details"}),e.jsx("p",{className:"font-medium text-gray-800",children:"Bank Transfer"}),s.banking&&e.jsx("div",{className:"text-gray-600 text-sm mt-3",children:e.jsxs("div",{className:"grid grid-cols-5 gap-1",children:[e.jsx("span",{className:"col-span-2 font-medium text-gray-700",children:"Account:"}),e.jsx("span",{className:"col-span-3",children:s.banking.account_holder}),e.jsx("span",{className:"col-span-2 font-medium text-gray-700",children:"Number:"}),e.jsx("span",{className:"col-span-3",children:s.banking.account_number}),e.jsx("span",{className:"col-span-2 font-medium text-gray-700",children:"Bank:"}),e.jsx("span",{className:"col-span-3",children:s.banking.bank_name}),e.jsx("span",{className:"col-span-2 font-medium text-gray-700",children:"IFSC:"}),e.jsx("span",{className:"col-span-3",children:s.banking.ifsc_code}),s.banking.branch&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"col-span-2 font-medium text-gray-700",children:"Branch:"}),e.jsx("span",{className:"col-span-3",children:s.banking.branch})]})]})}),(s.invoice.status==="paid"||s.invoice.status==="partially_paid")&&e.jsxs("div",{className:"mt-4 pt-3 border-t",style:{borderColor:`${t}30`},children:[e.jsxs("h3",{className:"text-sm uppercase font-bold tracking-wider text-green-600 mb-2 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Payment Received"]}),e.jsxs("div",{className:"text-gray-600 text-sm grid grid-cols-5 gap-1",children:[s.invoice.payment_date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"col-span-2 font-medium text-gray-700",children:"Date:"}),e.jsx("span",{className:"col-span-3",children:o(s.invoice.payment_date)})]}),s.invoice.payment_method&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"col-span-2 font-medium text-gray-700",children:"Method:"}),e.jsx("span",{className:"col-span-3",children:y(s.invoice.payment_method)})]}),s.invoice.payment_reference&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"col-span-2 font-medium text-gray-700",children:"Reference:"}),e.jsx("span",{className:"col-span-3",children:s.invoice.payment_reference})]}),s.invoice.status==="partially_paid"&&s.invoice.partially_paid_amount!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"col-span-2 font-medium text-gray-700",children:"Paid:"}),e.jsx("span",{className:"col-span-3 text-green-600 font-medium",children:n(s.invoice.partially_paid_amount,s.invoice.currency)}),e.jsx("span",{className:"col-span-2 font-medium text-gray-700",children:"Balance:"}),e.jsx("span",{className:"col-span-3",children:n(s.invoice.total-s.invoice.partially_paid_amount,s.invoice.currency)})]})]})]})]})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"rounded-xl overflow-hidden border shadow-lg print:shadow-none",style:{borderColor:`${t}30`,boxShadow:`0 4px 20px rgba(0,0,0,0.08), 0 1px 2px ${t}10, 0 -1px 0 ${i}10`},children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"text-left text-sm text-white",style:{backgroundColor:t},children:e.jsxs("tr",{children:[s.invoice.engagement_type!=="milestone"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"py-4 px-4 font-semibold",style:{width:"50%"},children:"Description"}),e.jsx("th",{className:"py-4 px-4 font-semibold text-right",style:{width:"15%"},children:"Quantity"}),e.jsx("th",{className:"py-4 px-4 font-semibold text-right",style:{width:"15%"},children:"Rate"}),e.jsx("th",{className:"py-4 px-4 font-semibold text-right",style:{width:"20%"},children:"Amount"})]}),s.invoice.engagement_type==="milestone"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"py-4 px-4 font-semibold",style:{width:"70%"},children:"Milestone"}),e.jsx("th",{className:"py-4 px-4 font-semibold text-right",style:{width:"30%"},children:"Amount"})]})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 text-sm",children:s.invoice.engagement_type==="milestone"&&s.invoice.milestones?s.invoice.milestones.map((a,r)=>e.jsxs("tr",{className:r%2===0?"bg-white hover:bg-gray-50":"bg-gray-50 hover:bg-gray-100",style:{transition:"all 0.2s ease"},children:[e.jsx("td",{className:"py-4 px-4 text-gray-800",children:a.name}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-800 font-medium",children:n(a.amount,s.invoice.currency)})]},r)):s.invoice.items?s.invoice.items.map((a,r)=>e.jsxs("tr",{className:r%2===0?"bg-white hover:bg-gray-50":"bg-gray-50 hover:bg-gray-100",style:{transition:"all 0.2s ease"},children:[e.jsx("td",{className:"py-4 px-4 text-gray-800",children:a.description}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-700",children:a.quantity}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-700",children:n(a.rate,s.invoice.currency)}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-800 font-medium",children:n(a.amount,s.invoice.currency)})]},r)):null})]})}),e.jsxs("div",{className:"mt-1 rounded-b-xl overflow-hidden shadow-lg backdrop-blur-sm print:shadow-none",style:{border:`1px solid ${t}20`,boxShadow:`0 4px 20px rgba(0,0,0,0.05), 0 1px 3px ${t}10`,backgroundColor:"rgba(255, 255, 255, 0.9)"},children:[e.jsxs("div",{className:"flex justify-between p-4 border-b text-sm",style:{borderColor:`${t}20`},children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Subtotal:"}),e.jsx("span",{className:"text-gray-800 font-medium",children:n(s.invoice.subtotal,s.invoice.currency)})]}),e.jsxs("div",{className:"flex justify-between p-4 border-b text-sm",style:{borderColor:`${t}20`},children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["Tax (",s.invoice.tax_percentage,"%):"]}),e.jsx("span",{className:"text-gray-800 font-medium",children:n(s.invoice.tax,s.invoice.currency)})]}),e.jsxs("div",{className:"flex justify-between p-4",style:{backgroundColor:`${t}08`},children:[e.jsx("span",{className:"text-base text-gray-800 font-bold",children:"Total:"}),e.jsx("span",{className:"text-base font-bold",style:{color:t},children:n(s.invoice.total,s.invoice.currency)})]})]})]}),s.invoice.notes&&e.jsxs("div",{className:"mt-8 p-5 rounded-xl",style:{backgroundColor:"rgba(255, 255, 255, 0.7)",border:`1px solid ${t}20`,boxShadow:`0 4px 15px rgba(0,0,0,0.03), 0 1px 2px ${t}10`},children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center",style:{color:t},children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Notes"]}),e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:s.invoice.notes})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"p-4 border-t",style:{borderColor:t},children:[e.jsx("p",{className:"text-sm text-gray-500 relative",style:{textShadow:"0 1px 2px rgba(255,255,255,0.8)"},children:s.issuer.footer_text||"Thank you for your business!"}),e.jsx("div",{className:"hidden print:block absolute inset-0 opacity-5 flex items-center justify-center pointer-events-none","aria-hidden":"true",children:e.jsx("div",{className:"transform rotate-45 text-8xl font-black text-gray-500",children:s.invoice.status==="paid"?"PAID":""})})]})})]})]})};export{P as I};
