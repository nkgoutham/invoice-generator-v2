function O(e){switch(e.invoice.engagement_type){case"retainership":return E(e);case"project":return z(e);case"milestone":return A(e);case"service":default:return B(e)}}function B(e){var i;return{...e,invoice:{...e.invoice,items:((i=e.invoice.items)==null?void 0:i.map(n=>({...n,quantity:Number(n.quantity)||0,rate:Number(n.rate)||0,amount:Number(n.amount)||0})))||[]}}}function E(e){if(!e.invoice.items||e.invoice.items.length===0)return{...e,invoice:{...e.invoice,items:[{description:"Monthly Retainer Fee",quantity:1,rate:e.invoice.subtotal||0,amount:e.invoice.subtotal||0}]}};const i=e.invoice.items[0],n=[{description:i.description||"Monthly Retainer Fee",quantity:1,rate:i.rate||e.invoice.subtotal||0,amount:i.amount||e.invoice.subtotal||0}];return{...e,invoice:{...e.invoice,items:n}}}function z(e){if(!e.invoice.items||e.invoice.items.length===0)return{...e,invoice:{...e.invoice,items:[{description:"Project Fee",quantity:1,rate:e.invoice.subtotal||0,amount:e.invoice.subtotal||0}]}};const i=e.invoice.items[0],n=[{description:i.description||"Project Fee",quantity:1,rate:i.rate||e.invoice.subtotal||0,amount:i.amount||e.invoice.subtotal||0}];return{...e,invoice:{...e.invoice,items:n}}}function A(e){if(!e.invoice.milestones||e.invoice.milestones.length===0)return{...e,invoice:{...e.invoice,milestones:[{name:"Project Milestone",amount:e.invoice.subtotal||0}]}};const i=e.invoice.milestones.map(n=>({name:n.name||"Milestone",amount:Number(n.amount)||0}));return{...e,invoice:{...e.invoice,milestones:i}}}function Y(e){var i,n,o,t,s,r,c,u,m,v,l,_,p,y,b,f,g,h,I,a,x,N,D,q,j,F,M,P,R,T,k,S,w;return{issuer:{business_name:((i=e.issuer)==null?void 0:i.business_name)||"Your Business",address:((n=e.issuer)==null?void 0:n.address)||"",pan_number:(o=e.issuer)==null?void 0:o.pan_number,phone:(t=e.issuer)==null?void 0:t.phone,logo_url:(s=e.issuer)==null?void 0:s.logo_url,primary_color:((r=e.issuer)==null?void 0:r.primary_color)||"#3B82F6",secondary_color:((c=e.issuer)==null?void 0:c.secondary_color)||"#0EA5E9",footer_text:((u=e.issuer)==null?void 0:u.footer_text)||"Thank you for your business!"},client:{name:((m=e.client)==null?void 0:m.name)||"",company_name:(v=e.client)==null?void 0:v.company_name,billing_address:(l=e.client)==null?void 0:l.billing_address,email:(_=e.client)==null?void 0:_.email,phone:(p=e.client)==null?void 0:p.phone,gst_number:(y=e.client)==null?void 0:y.gst_number},banking:e.banking,invoice:{invoice_number:((b=e.invoice)==null?void 0:b.invoice_number)||"",issue_date:((f=e.invoice)==null?void 0:f.issue_date)||new Date().toISOString().split("T")[0],due_date:((g=e.invoice)==null?void 0:g.due_date)||"",subtotal:Number((h=e.invoice)==null?void 0:h.subtotal)||0,tax:Number((I=e.invoice)==null?void 0:I.tax)||0,total:Number((a=e.invoice)==null?void 0:a.total)||0,notes:(x=e.invoice)==null?void 0:x.notes,currency:((N=e.invoice)==null?void 0:N.currency)||"INR",tax_percentage:Number((D=e.invoice)==null?void 0:D.tax_percentage)||0,tax_name:((q=e.invoice)==null?void 0:q.tax_name)||"",engagement_type:((j=e.invoice)==null?void 0:j.engagement_type)||"service",items:((F=e.invoice)==null?void 0:F.items)||[],milestones:((M=e.invoice)==null?void 0:M.milestones)||[],payment_date:(P=e.invoice)==null?void 0:P.payment_date,payment_method:(R=e.invoice)==null?void 0:R.payment_method,payment_reference:(T=e.invoice)==null?void 0:T.payment_reference,is_partially_paid:((k=e.invoice)==null?void 0:k.is_partially_paid)||!1,partially_paid_amount:(S=e.invoice)==null?void 0:S.partially_paid_amount,status:((w=e.invoice)==null?void 0:w.status)||"draft"}}}export{Y as n,O as t};
