import{a as F,u as A,r,j as e,L as o,V as c}from"./index-DMTdQ3St.js";import{u as I}from"./index.esm-DkrFlcfS.js";import{A as z}from"./alert-circle-DEjQuPjF.js";import{M as w}from"./mail-CvfNZUA1.js";import{L as M}from"./lock-DxvZPBgN.js";import{A as b}from"./arrow-right-Q1W384Tb.js";const _=()=>{const g=F(),{signIn:N,resetPassword:v,error:t,loading:m}=A(),[n,y]=r.useState(!1),[k,d]=r.useState(!1),[l,x]=r.useState(""),[u,h]=r.useState(!1),[i,p]=r.useState(!1),{register:f,handleSubmit:S,watch:P,formState:{errors:a}}=I(),j=P("email",""),L=async s=>{await N(s.email,s.password)&&(c.success("Logged in successfully!"),g("/dashboard"))},R=t&&(t.includes("Invalid login credentials")||t.includes("Email not confirmed")||t.includes("Invalid email or password")),C=async s=>{s.preventDefault(),!l&&j&&x(j),d(!0),p(!1)},E=async()=>{if(!l){c.error("Please enter your email address");return}h(!0);try{await v(l),p(!0),c.success("Password reset link sent to your email")}catch{}finally{h(!1)}};return e.jsxs("div",{className:"min-h-screen bg-neutral-50 flex flex-col justify-center px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md text-center",children:[e.jsx("img",{src:"/full_logo.png",alt:"InvoicePro Logo",className:"h-24 mx-auto mb-6"}),e.jsx("h2",{className:"text-center text-2xl font-bold tracking-tight text-neutral-900",children:"Sign in to your account"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-neutral-600",children:["Or"," ",e.jsx(o,{to:"/register",className:"font-medium text-accent-500 hover:text-accent-600 transition-colors",children:"create a new account"})]})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"card px-4 py-6 sm:px-10 sm:py-8",children:[t&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg animate-fade-in",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-5 w-5 mr-2 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:t})]}),R&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200",children:[e.jsx("p",{className:"text-sm font-medium",children:"Hmm, we don't recognize those credentials! ðŸ¤”"}),e.jsxs("p",{className:"mt-1 text-sm",children:["Please check your email and password, or ",e.jsx(o,{to:"/register",className:"font-semibold underline",children:"create an account"})," if you haven't already."]})]})]}),k?e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reset-email",className:"form-label",children:"Email address"}),e.jsxs("div",{className:"mt-1 relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(w,{className:"h-5 w-5 text-neutral-400 group-focus-within:text-accent-500 transition-colors duration-150"})}),e.jsx("input",{id:"reset-email",type:"email",value:l,onChange:s=>x(s.target.value),className:"form-input pl-10",placeholder:"you@example.com"})]})]}),i&&e.jsxs("div",{className:"p-4 bg-green-50 text-green-800 rounded-md text-sm",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Password reset link sent! Please check your email."]}),e.jsx("p",{className:"mt-2",children:"If you don't see the email, please check your spam folder."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"w-full btn btn-secondary btn-md",children:"Back to Login"}),e.jsx("button",{type:"button",onClick:E,disabled:u||i,className:"w-full btn btn-primary btn-md",children:u?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Sending..."]}):i?"Link Sent":"Send Reset Link"})]}),e.jsx("p",{className:"text-xs text-neutral-500 mt-4",children:"We'll send a password reset link to your email address. Please check your inbox and spam folder."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"space-y-6 animate-fade-in",onSubmit:S(L),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email address"}),e.jsxs("div",{className:"mt-1 relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(w,{className:"h-5 w-5 text-neutral-400 group-focus-within:text-accent-500 transition-colors duration-150"})}),e.jsx("input",{id:"email",type:"email",autoComplete:"email",className:`form-input pl-10 ${a.email?"border-red-300 focus:border-red-500 focus:ring-red-500/50":""}`,placeholder:"you@example.com",...f("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})})]}),a.email&&e.jsxs("p",{className:"mt-1.5 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"h-3 w-3 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a.email.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsxs("div",{className:"mt-1 relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(M,{className:"h-5 w-5 text-neutral-400 group-focus-within:text-accent-500 transition-colors duration-150"})}),e.jsx("input",{id:"password",type:n?"text":"password",autoComplete:"current-password",className:`form-input pl-10 ${a.password?"border-red-300 focus:border-red-500 focus:ring-red-500/50":""}`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",...f("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("button",{type:"button",onClick:()=>y(!n),className:"text-neutral-400 hover:text-neutral-600 focus:outline-none transition-colors",children:n?e.jsx("span",{className:"text-xs font-medium",children:"Hide"}):e.jsx("span",{className:"text-xs font-medium",children:"Show"})})})]}),a.password&&e.jsxs("p",{className:"mt-1.5 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"h-3 w-3 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a.password.message]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-accent-500 focus:ring-accent-500 border-neutral-300 rounded transition-colors"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-neutral-700",children:"Remember me"})]}),e.jsx("div",{className:"text-sm text-right",children:e.jsx("a",{href:"#",className:"font-medium text-accent-500 hover:text-accent-600 transition-colors inline-flex items-center",onClick:C,children:"Forgot your password?"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:m,className:"w-full btn btn-primary btn-md group",children:m?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"h-4 w-4 mr-2 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:["Sign in",e.jsx(b,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"New to InvoicePro?"}),e.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Create an account to start managing your invoices and expenses with ease."}),e.jsxs(o,{to:"/register",className:"mt-3 inline-flex items-center text-sm font-medium text-blue-700 hover:text-blue-800",children:["Create an account",e.jsx(b,{className:"ml-1 h-3.5 w-3.5"})]})]})]})]})})]})};export{_ as default};
