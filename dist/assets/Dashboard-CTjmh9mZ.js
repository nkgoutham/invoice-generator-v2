import{c as je,u as Ne,r as L,j as e,e as N,U as Oe,F as Se,L as U,T as Ee,D as Le}from"./index-DMTdQ3St.js";import{u as Te}from"./invoiceStore-ACMv2w23.js";import{u as $e}from"./clientStore-Bedc05g4.js";import{u as we}from"./currencyStore-CTj-PELi.js";import{f as z,a as Me}from"./helpers-kgrKKtTT.js";import{C as Be}from"./credit-card-CVK1R5mv.js";import{P as me}from"./plus-circle-DtCdQUqZ.js";import{f as Z,L as te,m as re,i as Q,C as le,A as Ve,a as J,b as pe,c as Ue,d as he,e as Ae,h as We,g as ze,G as Fe,j as fe,k as xe,l as ce,D as Ke,u as Ye,n as Xe,X as _e,Y as De,o as Ge,R as He,p as qe,T as Ze}from"./generateCategoricalChart-xdCEiT34.js";import{A as oe}from"./arrow-right-Q1W384Tb.js";import{C as ye}from"./clock-BUTmNg2j.js";import{A as Je}from"./alert-circle-DEjQuPjF.js";import{C as Qe}from"./check-circle-HEDH94gZ.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=je("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),tt=({className:a=""})=>{const{user:t}=Ne(),{currencySettings:n,fetchCurrencySettings:r,updateCurrencySettings:l,loading:i}=we();L.useEffect(()=>{t&&!n&&r(t.id)},[t,n,r]);const o=()=>{if(!n||i)return;const c=n.preferred_currency==="INR"?"USD":"INR";l({preferred_currency:c})};return n?e.jsxs("div",{className:`flex items-center space-x-2 ${a}`,children:[e.jsx("span",{className:`text-sm ${n.preferred_currency==="USD"?"font-medium text-blue-600":"text-gray-500"}`,children:"USD"}),e.jsxs("button",{type:"button",onClick:o,disabled:i,className:`relative inline-flex h-6 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${n.preferred_currency==="INR"?"bg-blue-600":"bg-gray-200"}`,"aria-pressed":n.preferred_currency==="INR","aria-labelledby":"currency-toggle",children:[e.jsx("span",{className:"sr-only",id:"currency-toggle",children:"Toggle currency between INR and USD"}),e.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n.preferred_currency==="INR"?"translate-x-6":"translate-x-0"}`})]}),e.jsx("span",{className:`text-sm ${n.preferred_currency==="INR"?"font-medium text-blue-600":"text-gray-500"}`,children:"INR"})]}):null};var at=["layout","type","stroke","connectNulls","isRange","ref"],rt=["key"],Ce;function ee(a){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ee(a)}function Pe(a,t){if(a==null)return{};var n=st(a,t),r,l;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(l=0;l<i.length;l++)r=i[l],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(a,r)&&(n[r]=a[r])}return n}function st(a,t){if(a==null)return{};var n={};for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)){if(t.indexOf(r)>=0)continue;n[r]=a[r]}return n}function H(){return H=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},H.apply(this,arguments)}function ge(a,t){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),n.push.apply(n,r)}return n}function F(a){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ge(Object(n),!0).forEach(function(r){B(a,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(n,r))})}return a}function nt(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function be(a,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,ke(r.key),r)}}function it(a,t,n){return t&&be(a.prototype,t),n&&be(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function lt(a,t,n){return t=se(t),ot(a,Re()?Reflect.construct(t,n||[],se(a).constructor):t.apply(a,n))}function ot(a,t){if(t&&(ee(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ct(a)}function ct(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Re(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Re=function(){return!!a})()}function se(a){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},se(a)}function dt(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&de(a,t)}function de(a,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},de(a,t)}function B(a,t,n){return t=ke(t),t in a?Object.defineProperty(a,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[t]=n,a}function ke(a){var t=ut(a,"string");return ee(t)=="symbol"?t:t+""}function ut(a,t){if(ee(a)!="object"||!a)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var r=n.call(a,t||"default");if(ee(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}var K=function(a){function t(){var n;nt(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return n=lt(this,t,[].concat(l)),B(n,"state",{isAnimationFinished:!0}),B(n,"id",Ye("recharts-area-")),B(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ce(o)&&o()}),B(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ce(o)&&o()}),n}return dt(t,a),it(t,[{key:"renderDots",value:function(r,l,i){var o=this.props.isAnimationActive,c=this.state.isAnimationFinished;if(o&&!c)return null;var u=this.props,m=u.dot,x=u.points,h=u.dataKey,g=Z(this.props,!1),C=Z(m,!0),D=x.map(function(b,I){var w=F(F(F({key:"dot-".concat(I),r:3},g),C),{},{index:I,cx:b.x,cy:b.y,dataKey:h,value:b.value,payload:b.payload,points:x});return t.renderDotItem(m,w)}),k={clipPath:r?"url(#clipPath-".concat(l?"":"dots-").concat(i,")"):null};return N.createElement(te,H({className:"recharts-area-dots"},k),D)}},{key:"renderHorizontalRect",value:function(r){var l=this.props,i=l.baseLine,o=l.points,c=l.strokeWidth,u=o[0].x,m=o[o.length-1].x,x=r*Math.abs(u-m),h=re(o.map(function(g){return g.y||0}));return Q(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(re(i.map(function(g){return g.y||0})),h)),Q(h)?N.createElement("rect",{x:u<m?u:u-x,y:0,width:x,height:Math.floor(h+(c?parseInt("".concat(c),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var l=this.props,i=l.baseLine,o=l.points,c=l.strokeWidth,u=o[0].y,m=o[o.length-1].y,x=r*Math.abs(u-m),h=re(o.map(function(g){return g.x||0}));return Q(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(re(i.map(function(g){return g.x||0})),h)),Q(h)?N.createElement("rect",{x:0,y:u<m?u:u-x,width:h+(c?parseInt("".concat(c),10):1),height:Math.floor(x)}):null}},{key:"renderClipRect",value:function(r){var l=this.props.layout;return l==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,l,i,o){var c=this.props,u=c.layout,m=c.type,x=c.stroke,h=c.connectNulls,g=c.isRange;c.ref;var C=Pe(c,at);return N.createElement(te,{clipPath:i?"url(#clipPath-".concat(o,")"):null},N.createElement(le,H({},Z(C,!0),{points:r,connectNulls:h,type:m,baseLine:l,layout:u,stroke:"none",className:"recharts-area-area"})),x!=="none"&&N.createElement(le,H({},Z(this.props,!1),{className:"recharts-area-curve",layout:u,type:m,connectNulls:h,fill:"none",points:r})),x!=="none"&&g&&N.createElement(le,H({},Z(this.props,!1),{className:"recharts-area-curve",layout:u,type:m,connectNulls:h,fill:"none",points:l})))}},{key:"renderAreaWithAnimation",value:function(r,l){var i=this,o=this.props,c=o.points,u=o.baseLine,m=o.isAnimationActive,x=o.animationBegin,h=o.animationDuration,g=o.animationEasing,C=o.animationId,D=this.state,k=D.prevPoints,b=D.prevBaseLine;return N.createElement(Ve,{begin:x,duration:h,isActive:m,easing:g,from:{t:0},to:{t:1},key:"area-".concat(C),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(I){var w=I.t;if(k){var T=k.length/c.length,j=c.map(function(P,$){var S=Math.floor($*T);if(k[S]){var M=k[S],Y=J(M.x,P.x),X=J(M.y,P.y);return F(F({},P),{},{x:Y(w),y:X(w)})}return P}),A;if(Q(u)&&typeof u=="number"){var _=J(b,u);A=_(w)}else if(pe(u)||Ue(u)){var O=J(b,0);A=O(w)}else A=u.map(function(P,$){var S=Math.floor($*T);if(b[S]){var M=b[S],Y=J(M.x,P.x),X=J(M.y,P.y);return F(F({},P),{},{x:Y(w),y:X(w)})}return P});return i.renderAreaStatically(j,A,r,l)}return N.createElement(te,null,N.createElement("defs",null,N.createElement("clipPath",{id:"animationClipPath-".concat(l)},i.renderClipRect(w))),N.createElement(te,{clipPath:"url(#animationClipPath-".concat(l,")")},i.renderAreaStatically(c,u,r,l)))})}},{key:"renderArea",value:function(r,l){var i=this.props,o=i.points,c=i.baseLine,u=i.isAnimationActive,m=this.state,x=m.prevPoints,h=m.prevBaseLine,g=m.totalLength;return u&&o&&o.length&&(!x&&g>0||!he(x,o)||!he(h,c))?this.renderAreaWithAnimation(r,l):this.renderAreaStatically(o,c,r,l)}},{key:"render",value:function(){var r,l=this.props,i=l.hide,o=l.dot,c=l.points,u=l.className,m=l.top,x=l.left,h=l.xAxis,g=l.yAxis,C=l.width,D=l.height,k=l.isAnimationActive,b=l.id;if(i||!c||!c.length)return null;var I=this.state.isAnimationFinished,w=c.length===1,T=Ae("recharts-area",u),j=h&&h.allowDataOverflow,A=g&&g.allowDataOverflow,_=j||A,O=pe(b)?this.id:b,P=(r=Z(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},$=P.r,S=$===void 0?3:$,M=P.strokeWidth,Y=M===void 0?2:M,X=We(o)?o:{},s=X.clipDot,d=s===void 0?!0:s,p=S*2+Y;return N.createElement(te,{className:T},j||A?N.createElement("defs",null,N.createElement("clipPath",{id:"clipPath-".concat(O)},N.createElement("rect",{x:j?x:x-C/2,y:A?m:m-D/2,width:j?C:C*2,height:A?D:D*2})),!d&&N.createElement("clipPath",{id:"clipPath-dots-".concat(O)},N.createElement("rect",{x:x-p/2,y:m-p/2,width:C+p,height:D+p}))):null,w?null:this.renderArea(_,O),(o||w)&&this.renderDots(_,d,O),(!k||I)&&ze.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,l){return r.animationId!==l.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:l.curPoints,prevBaseLine:l.curBaseLine}:r.points!==l.curPoints||r.baseLine!==l.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(L.PureComponent);Ce=K;B(K,"displayName","Area");B(K,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Fe.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});B(K,"getBaseValue",function(a,t,n,r){var l=a.layout,i=a.baseValue,o=t.props.baseValue,c=o??i;if(Q(c)&&typeof c=="number")return c;var u=l==="horizontal"?r:n,m=u.scale.domain();if(u.type==="number"){var x=Math.max(m[0],m[1]),h=Math.min(m[0],m[1]);return c==="dataMin"?h:c==="dataMax"||x<0?x:Math.max(Math.min(m[0],m[1]),0)}return c==="dataMin"?m[0]:c==="dataMax"?m[1]:m[0]});B(K,"getComposedData",function(a){var t=a.props,n=a.item,r=a.xAxis,l=a.yAxis,i=a.xAxisTicks,o=a.yAxisTicks,c=a.bandSize,u=a.dataKey,m=a.stackedData,x=a.dataStartIndex,h=a.displayedData,g=a.offset,C=t.layout,D=m&&m.length,k=Ce.getBaseValue(t,n,r,l),b=C==="horizontal",I=!1,w=h.map(function(j,A){var _;D?_=m[x+A]:(_=fe(j,u),Array.isArray(_)?I=!0:_=[k,_]);var O=_[1]==null||D&&fe(j,u)==null;return b?{x:xe({axis:r,ticks:i,bandSize:c,entry:j,index:A}),y:O?null:l.scale(_[1]),value:_,payload:j}:{x:O?null:r.scale(_[1]),y:xe({axis:l,ticks:o,bandSize:c,entry:j,index:A}),value:_,payload:j}}),T;return D||I?T=w.map(function(j){var A=Array.isArray(j.value)?j.value[0]:null;return b?{x:j.x,y:A!=null&&j.y!=null?l.scale(A):null}:{x:A!=null?r.scale(A):null,y:j.y}}):T=b?l.scale(k):r.scale(k),F({points:w,baseLine:T,layout:C,isRange:I},g)});B(K,"renderDotItem",function(a,t){var n;if(N.isValidElement(a))n=N.cloneElement(a,t);else if(ce(a))n=a(t);else{var r=Ae("recharts-area-dot",typeof a!="boolean"?a.className:""),l=t.key,i=Pe(t,rt);n=N.createElement(Ke,H({},i,{key:l,className:r}))}return n});var mt=Xe({chartName:"AreaChart",GraphicalChild:K,axisComponents:[{axisType:"xAxis",AxisComp:_e},{axisType:"yAxis",AxisComp:De}],formatAxisMap:Ge});const _t=()=>{const{user:a}=Ne(),{invoices:t,fetchInvoices:n}=Te(),{clients:r,fetchClients:l}=$e(),{currencySettings:i,fetchCurrencySettings:o,convertCurrency:c}=we(),[u,m]=L.useState(!0),[x,h]=L.useState([]),[g,C]=L.useState([]),[D,k]=L.useState([]),[b,I]=L.useState(()=>{const s=new Date;return s.setMonth(s.getMonth()-2),s}),[w,T]=L.useState(new Date),[j,A]=L.useState("3");L.useEffect(()=>{(async()=>{a&&(m(!0),await Promise.all([n(a.id),l(a.id),o(a.id)]),m(!1))})()},[a,n,l,o]),L.useEffect(()=>{if(!u){const s=r.length,d=t.length,p=t.filter(v=>v.status==="paid").length,f=t.filter(v=>v.status==="overdue").length,y=t.filter(v=>v.status==="partially_paid").length,R=t.filter(v=>v.status==="sent").length,q=t.filter(v=>v.status==="draft").length,E=[];p>0&&E.push(`${p} paid`),R>0&&E.push(`${R} sent`),f>0&&E.push(`${f} overdue`),y>0&&E.push(`${y} partial`),q>0&&E.push(`${q} draft`);const W=E.join(", ")||"No invoices",V=P(t.filter(v=>v.status==="paid")),G=P([...t.filter(v=>["sent","overdue"].includes(v.status)),...t.filter(v=>v.status==="partially_paid").map(v=>({...v,total:v.total-(v.partially_paid_amount||0)}))]),ae=(i==null?void 0:i.preferred_currency)||"INR",ue=v=>{if(ae==="USD"){const ne=c(v.inrAmount,"INR","USD"),ie=v.usdAmount+ne;return z(ie,"USD")}else{const ne=c(v.usdAmount,"USD","INR"),ie=v.inrAmount+ne;return z(ie,"INR")}},Ie=[{title:"Total Clients",value:s,description:"Active client relationships",icon:e.jsx(Oe,{className:"h-5 w-5"}),color:"text-blue-600",bgColor:"bg-blue-50",iconBg:"bg-blue-100"},{title:"Total Invoices",value:d,description:W,icon:e.jsx(Se,{className:"h-5 w-5"}),color:"text-purple-600",bgColor:"bg-purple-50",iconBg:"bg-purple-100"},{title:"Total Paid",value:ue(V),description:"Total revenue received",icon:e.jsx(et,{className:"h-5 w-5"}),color:"text-emerald-600",bgColor:"bg-emerald-50",iconBg:"bg-emerald-100"},{title:"Pending Revenue",value:ue(G),description:"Awaiting payment",icon:e.jsx(Be,{className:"h-5 w-5"}),color:"text-amber-600",bgColor:"bg-amber-50",iconBg:"bg-amber-100"}];h(Ie),_(),O()}},[u,r,t,i,c,b,w]);const _=()=>{const s=t.filter(f=>(f.status==="paid"||f.status==="partially_paid")&&f.payment_date),d=[],p=new Date(b);for(;p<=w;){const f=p.getFullYear(),y=p.getMonth(),R=new Date(f,y,1).toLocaleString("default",{month:"short"});d.push({month:R,year:f,amount:0,name:`${R} ${f}`}),p.setMonth(p.getMonth()+1)}s.forEach(f=>{if(!f.payment_date)return;const y=new Date(f.payment_date);if(y<b||y>w)return;const R=y.getFullYear(),q=y.getMonth(),E=new Date(R,q,1).toLocaleString("default",{month:"short"}),W=d.findIndex(V=>V.month===E&&V.year===R);if(W!==-1){const V=f.status==="partially_paid"?f.partially_paid_amount||0:f.total||0;let G=V;f.currency!==(i==null?void 0:i.preferred_currency)&&(G=c(V,f.currency,(i==null?void 0:i.preferred_currency)||"INR")),d[W].amount+=G}}),C(d)},O=()=>{const s=t.filter(y=>y.status==="paid"||y.status==="partially_paid"),d=new Map;let p=0;s.forEach(y=>{var G,ae;const R=y.client_id,q=((G=y.clients)==null?void 0:G.company_name)||((ae=y.clients)==null?void 0:ae.name)||"Unknown Client",E=y.status==="partially_paid"&&y.partially_paid_amount!==void 0?y.partially_paid_amount:y.total;let W=E;y.currency!==(i==null?void 0:i.preferred_currency)&&(W=c(E,y.currency,(i==null?void 0:i.preferred_currency)||"INR")),p+=W,d.has(R)||d.set(R,{client_id:R,client_name:q,total:0});const V=d.get(R);V.total+=W});const f=Array.from(d.values()).map(y=>({...y,percentage:p>0?Math.round(y.total/p*100):0,formattedAmount:z(y.total,(i==null?void 0:i.preferred_currency)||"INR")})).sort((y,R)=>R.total-y.total).slice(0,5);k(f)},P=s=>{let d=0,p=0;for(const f of s)f.status==="partially_paid"&&f.partially_paid_amount!==void 0?f.currency==="USD"?p+=f.partially_paid_amount:d+=f.partially_paid_amount:f.currency==="USD"?p+=f.total:d+=f.total;return{inrAmount:d,usdAmount:p}},$=[...t||[]].sort((s,d)=>new Date(d.created_at).getTime()-new Date(s.created_at).getTime()).slice(0,3),S=[...t||[]].filter(s=>s.status==="paid"||s.status==="partially_paid").sort((s,d)=>{const p=new Date(s.payment_date||s.created_at);return new Date(d.payment_date||d.created_at).getTime()-p.getTime()}).slice(0,3),M=s=>{switch(s){case"paid":return e.jsx(Qe,{className:"h-5 w-5 text-emerald-500"});case"overdue":return e.jsx(Je,{className:"h-5 w-5 text-red-500"});case"sent":return e.jsx(ye,{className:"h-5 w-5 text-amber-500"});case"partially_paid":return e.jsx(Le,{className:"h-5 w-5 text-orange-500"});default:return e.jsx(ye,{className:"h-5 w-5 text-neutral-400"})}},Y=s=>{A(s);const d=new Date,p=new Date,f=parseInt(s);p.setMonth(d.getMonth()-(f-1)),I(p),T(d)},X=({active:s,payload:d,label:p})=>s&&d&&d.length?e.jsxs("div",{className:"bg-white p-3 shadow-lg border border-gray-200/80 rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:p}),e.jsx("p",{className:"text-accent-600 text-sm font-medium",children:z(d[0].value,(i==null?void 0:i.preferred_currency)||"INR")})]}):null;return u?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"loader h-12 w-12"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 px-4 sm:px-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-neutral-900",children:"Dashboard"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[e.jsxs(U,{to:"/invoices/new",className:"w-full sm:w-auto btn btn-primary btn-md",children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"New Invoice"]}),e.jsxs(U,{to:"/clients/new",className:"w-full sm:w-auto btn btn-secondary btn-md",children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"New Client"]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(tt,{})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:x.map((s,d)=>e.jsxs("div",{className:"flex flex-col h-full card hover:shadow-hover group transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"flex-1 p-4 sm:p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex-shrink-0 rounded-xl p-3 ${s.iconBg} ${s.color} group-hover:scale-110 transition-transform duration-300`,children:s.icon}),e.jsx("div",{className:"ml-4 flex-1 min-w-0 space-y-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-xs sm:text-sm font-medium text-neutral-500 truncate",children:s.title}),e.jsx("dd",{children:e.jsx("div",{className:"text-base sm:text-lg font-medium text-neutral-900",children:s.value})})]})})]})}),e.jsx("div",{className:`${s.bgColor} px-4 py-3 border-t border-gray-100/50 transition-colors duration-300`,children:e.jsx("div",{className:"text-sm text-neutral-600 truncate",children:s.description})})]},d))}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2 sm:mb-0",children:"Revenue Trend"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-sm text-gray-500 hidden sm:block",children:[b.toLocaleString("default",{month:"short",year:"numeric"})," -",w.toLocaleString("default",{month:"short",year:"numeric"})]}),e.jsxs("select",{className:"text-sm border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",value:j,onChange:s=>Y(s.target.value),children:[e.jsx("option",{value:"3",children:"Last 3 months"}),e.jsx("option",{value:"6",children:"Last 6 months"}),e.jsx("option",{value:"12",children:"Last 12 months"}),e.jsx("option",{value:"24",children:"Last 24 months"})]})]})]}),e.jsx("div",{className:"h-60 w-full",children:g.length>0?e.jsx(He,{width:"100%",height:"100%",children:e.jsxs(mt,{data:g,margin:{top:10,right:30,left:0,bottom:5},children:[e.jsx(qe,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB",opacity:.5}),e.jsx(_e,{dataKey:"name",tick:{fontSize:12,fill:"#6B7280"},axisLine:{stroke:"#E5E7EB"},tickLine:!1}),e.jsx(De,{tick:{fontSize:12,fill:"#6B7280"},axisLine:!1,tickLine:!1,tickFormatter:s=>`${((i==null?void 0:i.preferred_currency)||"INR")==="INR"?"â‚¹":"$"}${s}`}),e.jsx(Ze,{content:e.jsx(X,{})}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#5090f0",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#5090f0",stopOpacity:.05})]})}),e.jsx(K,{type:"monotone",dataKey:"amount",stroke:"#5090f0",strokeWidth:2,fill:"url(#colorRevenue)",activeDot:{r:6,stroke:"#fff",strokeWidth:2,fill:"#5090f0"},dot:!1})]})}):e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-500",children:"No revenue data available for this period"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:gap-5 lg:grid-cols-2",children:[e.jsxs("div",{className:"card overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-4 sm:px-6 flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsx("h2",{className:"text-base sm:text-lg font-medium text-neutral-900 mb-2 sm:mb-0",children:"Recent Invoices"}),e.jsxs(U,{to:"/invoices",className:"text-sm font-medium text-accent-500 hover:text-accent-600 inline-flex items-center transition-all duration-200 hover:translate-x-0.5",children:["View all",e.jsx(oe,{className:"ml-1 h-4 w-4"})]})]}),e.jsxs("div",{className:"border-t border-neutral-200/80",children:[e.jsx("ul",{className:"divide-y divide-neutral-200/80",children:$.length>0?$.map(s=>{var d,p;return e.jsx("li",{className:"group",children:e.jsx(U,{to:`/invoices/${s.id}`,className:"block hover:bg-neutral-50 transition-colors duration-200",children:e.jsxs("div",{className:"px-4 py-3 sm:px-6 sm:py-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"transform group-hover:scale-105 transition-transform duration-200",children:M(s.status)}),e.jsx("span",{className:"ml-2 text-sm font-medium text-neutral-900",children:s.invoice_number})]}),e.jsx("div",{className:"ml-2 flex-shrink-0 flex",children:e.jsx("span",{className:`badge ${s.status==="paid"?"badge-success":s.status==="overdue"?"badge-danger":s.status==="sent"?"badge-warning":s.status==="partially_paid"?"bg-orange-100 text-orange-800":"badge-neutral"}`,children:s.status==="partially_paid"?"Partially Paid":s.status.charAt(0).toUpperCase()+s.status.slice(1)})})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap justify-between items-center gap-y-2",children:[e.jsx("div",{className:"text-sm text-neutral-500 truncate",children:((d=s.clients)==null?void 0:d.company_name)||((p=s.clients)==null?void 0:p.name)||"Client"}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"font-medium text-neutral-900",children:z(s.total,s.currency)}),s.status==="partially_paid"&&s.partially_paid_amount!==void 0&&e.jsxs("span",{className:"ml-1 text-xs text-emerald-600",children:["(",z(s.partially_paid_amount,s.currency)," paid)"]})]})]})]})})},s.id)}):e.jsx("li",{className:"px-4 py-5 text-center text-sm text-neutral-500",children:"No invoices yet. Create your first invoice!"})}),$.length>0&&e.jsx("div",{className:"px-6 py-2 bg-gray-50 border-t border-gray-100 text-center",children:e.jsxs(U,{to:"/invoices",className:"text-sm text-accent-500 hover:text-accent-600 inline-flex items-center justify-center transition-all duration-200 hover:translate-x-0.5",children:["View all invoices",e.jsx(ve,{className:"ml-1 h-4 w-4"})]})})]})]}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-4 sm:px-6 flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsx("h2",{className:"text-base sm:text-lg font-medium text-neutral-900 mb-2 sm:mb-0",children:"Recent Payments"}),e.jsxs(U,{to:"/invoices",className:"text-sm font-medium text-accent-500 hover:text-accent-600 inline-flex items-center transition-all duration-200 hover:translate-x-0.5",children:["View all",e.jsx(oe,{className:"ml-1 h-4 w-4"})]})]}),e.jsxs("div",{className:"border-t border-neutral-200/80",children:[e.jsx("ul",{className:"divide-y divide-neutral-200/80",children:S.length>0?S.map(s=>{var d,p;return e.jsx("li",{className:"group",children:e.jsx(U,{to:`/invoices/${s.id}`,className:"block hover:bg-neutral-50 transition-colors duration-200",children:e.jsxs("div",{className:"px-4 py-3 sm:px-6 sm:py-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-y-2",children:[e.jsxs("div",{className:"flex items-center mr-2",children:[e.jsx("div",{className:"mr-2 transform group-hover:scale-105 transition-transform duration-200 text-emerald-500",children:e.jsx(Ee,{className:"h-5 w-5"})}),e.jsxs("span",{className:"text-sm font-medium text-neutral-900 truncate",children:[s.status==="partially_paid"?"Partial payment":"Payment received"," for #",s.invoice_number]})]}),e.jsx("div",{className:"text-xs sm:text-sm text-neutral-500",children:Me(s.payment_date||s.created_at)})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap justify-between items-center gap-y-2",children:[e.jsx("div",{className:"text-sm text-neutral-500 truncate",children:((d=s.clients)==null?void 0:d.company_name)||((p=s.clients)==null?void 0:p.name)||"Client"}),e.jsx("div",{className:"font-medium text-sm text-emerald-600",children:s.status==="partially_paid"&&s.partially_paid_amount!==void 0?z(s.partially_paid_amount,s.currency):z(s.total,s.currency)})]})]})})},s.id)}):e.jsx("li",{className:"px-4 py-5 text-center text-sm text-neutral-500",children:"No payments received yet."})}),S.length>0&&e.jsx("div",{className:"px-6 py-2 bg-gray-50 border-t border-gray-100 text-center",children:e.jsxs(U,{to:"/invoices",className:"text-sm text-accent-500 hover:text-accent-600 inline-flex items-center justify-center transition-all duration-200 hover:translate-x-0.5",children:["View all payments",e.jsx(ve,{className:"ml-1 h-4 w-4"})]})})]})]})]}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-4 sm:px-6 flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsx("h2",{className:"text-base sm:text-lg font-medium text-neutral-900 mb-2 sm:mb-0",children:"Top Clients by Revenue"}),e.jsxs(U,{to:"/earnings",className:"text-sm font-medium text-accent-500 hover:text-accent-600 inline-flex items-center transition-all duration-200 hover:translate-x-0.5",children:["View full report",e.jsx(oe,{className:"ml-1 h-4 w-4"})]})]}),e.jsx("div",{className:"border-t border-neutral-200/80",children:D.length>0?e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map((s,d)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.client_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:s.formattedAmount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:e.jsxs("div",{className:"flex items-center justify-end",children:[e.jsxs("span",{className:"mr-2",children:[s.percentage,"%"]}),e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-accent-500 h-2.5 rounded-full",style:{width:`${s.percentage}%`}})})]})})]},s.client_id||d))})]})}):e.jsx("div",{className:"px-4 py-5 text-center text-sm text-neutral-500",children:"No revenue data available yet."})})]})]})};export{_t as default};
