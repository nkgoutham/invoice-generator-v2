import{d as y,a as v,r as d,j as e,L as o,D as h,R as p,F as w,V as u}from"./index-DMTdQ3St.js";import{u as _}from"./expenseStore-BpTe1G7s.js";import{a as C,f as E}from"./helpers-kgrKKtTT.js";import{A as k}from"./arrow-left-DgZupmuo.js";import{P as z}from"./pen-square-DAdg6CDQ.js";import{T as D}from"./trash-2-B7Y99Ql6.js";import{C as R}from"./calendar-CRwE0Pfy.js";import{T as A}from"./tag-ilgYDLAU.js";import{C as F}from"./credit-card-CVK1R5mv.js";import{B as T}from"./building-BwG9NAGn.js";import{C as q}from"./check-circle-HEDH94gZ.js";import{E as f}from"./external-link-C3r03cik.js";const G=()=>{var c,m,n,x;const{id:r}=y(),j=v(),{selectedExpense:s,fetchExpense:a,deleteExpense:g,loading:N}=_(),[l,i]=d.useState(!1);d.useEffect(()=>{r&&a(r)},[r,a]);const b=async()=>{if(r&&window.confirm("Are you sure you want to delete this expense?")){i(!0);try{await g(r),u.success("Expense deleted successfully"),j("/expenses")}catch(t){console.error("Error deleting expense:",t),u.error("Failed to delete expense")}finally{i(!1)}}};return N||!s?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-0",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(o,{to:"/expenses",className:"text-gray-500 hover:text-gray-700 mr-4",children:e.jsx(k,{size:20})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(o,{to:`/expenses/${r}/edit`,className:"flex flex-col items-center justify-center py-2 px-1 sm:py-3 sm:px-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-center shadow-sm",children:[e.jsx(z,{size:16,className:"mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"Edit"})]}),e.jsx("button",{onClick:b,disabled:l,className:"flex flex-col items-center justify-center py-2 px-1 sm:py-3 sm:px-2 bg-red-500 text-white rounded-md hover:bg-red-600 text-center shadow-sm",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"Deleting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{size:16,className:"mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"Delete"})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Expense Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(R,{className:"text-gray-500 mt-1 flex-shrink-0",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),e.jsx("p",{className:"font-medium",children:C(s.date)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(h,{className:"text-gray-500 mt-1 flex-shrink-0",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-medium",children:E(s.amount,s.currency)})]})]}),s.category&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(A,{className:"text-gray-500 mt-1 flex-shrink-0",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Category"}),e.jsx("p",{className:"font-medium",style:{color:s.category.color},children:s.category.name})]})]}),s.payment_method&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(F,{className:"text-gray-500 mt-1 flex-shrink-0",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Payment Method"}),e.jsx("p",{className:"font-medium",children:s.payment_method.replace("_"," ").replace(/\b\w/g,t=>t.toUpperCase())})]})]}),s.client&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(T,{className:"text-gray-500 mt-1 flex-shrink-0",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Client"}),e.jsx("p",{className:"font-medium",children:s.client.company_name||s.client.name})]})]}),s.is_recurring&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(p,{className:"text-gray-500 mt-1 flex-shrink-0",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Recurring"}),e.jsx("p",{className:"font-medium",children:((c=s.recurring_frequency)==null?void 0:c.charAt(0).toUpperCase())+((m=s.recurring_frequency)==null?void 0:m.slice(1))||"Yes"})]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 gap-4",children:[s.is_billable&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg flex items-center",children:[e.jsx(q,{className:"h-5 w-5 text-blue-500 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Billable"}),e.jsx("p",{className:"text-xs text-blue-600",children:"This expense is billable to a client"})]})]}),s.is_reimbursable&&e.jsxs("div",{className:"bg-amber-50 p-3 rounded-lg flex items-center",children:[e.jsx(h,{className:"h-5 w-5 text-amber-500 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-700",children:"Reimbursable"}),e.jsx("p",{className:"text-xs text-amber-600",children:s.reimbursed?"Has been reimbursed":"Pending reimbursement"})]})]}),s.is_recurring&&e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg flex items-center",children:[e.jsx(p,{className:"h-5 w-5 text-purple-500 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Recurring"}),e.jsx("p",{className:"text-xs text-purple-600",children:((n=s.recurring_frequency)==null?void 0:n.charAt(0).toUpperCase())+((x=s.recurring_frequency)==null?void 0:x.slice(1))||"Regular expense"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.notes&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notes"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:s.notes})]}),s.receipt_url&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Receipt"}),s.receipt_url.toLowerCase().endsWith(".pdf")?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(w,{className:"h-16 w-16 text-gray-400 mb-2"}),e.jsxs("a",{href:s.receipt_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center",children:["View Receipt",e.jsx(f,{className:"ml-1 h-4 w-4"})]})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-2 max-h-64 overflow-hidden rounded-md",children:e.jsx("img",{src:s.receipt_url,alt:"Receipt",className:"object-contain max-h-64 w-auto"})}),e.jsxs("a",{href:s.receipt_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center",children:["View Full Size",e.jsx(f,{className:"ml-1 h-4 w-4"})]})]})]})]})]})};export{G as default};
